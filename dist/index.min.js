!function(e,t){if("function"==typeof define&&define.amd)define("vxe-table-plugin-charts",["exports","xe-utils/methods/xe-utils","echarts"],t);else if("undefined"!=typeof exports)t(exports,require("xe-utils/methods/xe-utils"),require("echarts"));else{var r={exports:{}};t(r.exports,e.xeUtilsMethodsXeUtils,e.echarts),e.VXETablePluginCharts=r.exports.default}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,h,s){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function r(l){return function(o){var e=o.$table,t=o.menu,r=e.$vxe,a=e._chartModals,n=r.modal;a=a||(e._chartModals=[]);var i={id:h.default.uniqueId(),resize:!0,mask:!1,lockView:!1,showFooter:!1,escClosable:!0,width:600,minWidth:500,height:400,minHeight:300,title:t.name,className:"vxe-table--ignore-areas-clear vxe-table--charts",slots:{default:function(e,t){return[t("div",{class:"vxe-chart--wrapper"},[t("div",{class:"vxe-chart--panel"})])]}},events:{show:function(e){var t=e.$modal,r=t.$el.querySelector(".vxe-chart--wrapper");if(r){var a=s.default.init(r);a.setOption(l(o)),t.$chart=a}},hide:function(e){var t=e.$modal;h.default.remove(a,function(e){return e===t.id}),t.$chart&&(t.$chart.dispose(),t.$chart=null)},zoom:function(e){var t=e.$modal;t.$chart&&t.$chart.resize()}}};a.push(i.id),n.open(i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginCharts=void 0,h=t(h),s=t(s);var a={CHART_BAR_X_AXIS:r(function(e){var t=e.$table,r=e.menu,a=t.getCellAreas()[0],o=a.rows,n=a.cols,i=r.params,l=(void 0===i?{}:i).category,s=t.getColumnByField(l||n[0].property),u=n.filter(function(e){return e.property!==s.property}),d={data:[]},p=[],c={type:"category",data:o.map(function(e){return h.default.get(e,s.property)})},f={normal:{show:!0}};return u.forEach(function(t){d.data.push(t.title),p.push({name:t.title,type:"bar",label:f,data:o.map(function(e){return h.default.get(e,t.property)})})}),{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"4%",right:"4%",bottom:"3%",containLabel:!0},legend:d,xAxis:{type:"value"},yAxis:c,series:p}}),CHART_BAR_Y_AXIS:r(function(e){var t=e.$table,r=e.menu,a=t.getCellAreas()[0],o=a.rows,n=a.cols,i=r.params,l=(void 0===i?{}:i).category,s=t.getColumnByField(l||n[0].property),u=n.filter(function(e){return e.property!==s.property}),d={data:[]},p=[],c={type:"category",data:o.map(function(e){return h.default.get(e,s.property)})},f={normal:{show:!0}};return u.forEach(function(t){d.data.push(t.title),p.push({name:t.title,type:"bar",label:f,data:o.map(function(e){return h.default.get(e,t.property)})})}),{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"4%",right:"4%",bottom:"3%",containLabel:!0},legend:d,xAxis:c,yAxis:{type:"value"},series:p}}),CHART_LINE:r(function(e){var t=e.$table,r=e.menu,a=t.getCellAreas()[0],o=a.rows,n=a.cols,i=r.params,l=(void 0===i?{}:i).category,s=t.getColumnByField(l||n[0].property),u=n.filter(function(e){return e.property!==s.property}),d={data:[]},p=[],c={type:"category",data:o.map(function(e){return h.default.get(e,s.property)})};return u.forEach(function(t){d.data.push(t.title),p.push({name:t.title,type:"line",data:o.map(function(e){return h.default.get(e,t.property)})})}),{tooltip:{trigger:"axis"},legend:d,toolbox:{feature:{saveAsImage:{}}},grid:{left:"4%",right:"4%",bottom:"3%",containLabel:!0},xAxis:c,yAxis:{type:"value"},series:p}}),CHART_PIE:r(function(e){var t=e.$table,r=e.menu,a=t.getCellAreas()[0],o=a.rows,n=a.cols,i=r.params,l=(void 0===i?{}:i).category,s=t.getColumnByField(l||n[0].property),u=n.filter(function(e){return e.property!==s.property})[0],d=o.map(function(e){return h.default.get(e,s.property)}),p=[];return o.forEach(function(e){p.push({name:h.default.get(e,s.property),value:h.default.get(e,u.property)})}),{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,data:d},grid:{left:"4%",right:"4%",bottom:"3%",containLabel:!0},series:[{name:u.title,type:"pie",radius:"50%",center:["40%","50%"],data:p}]}})};function o(e,t){var r=t.$table,a=e.code,o=e.params,n=void 0===o?{}:o;switch(a){case"CHART_BAR_X_AXIS":case"CHART_BAR_Y_AXIS":case"CHART_LINE":var i=r.getCellAreas();if(1===i.length){var l=i[0],s=l.rows,u=l.cols,d=n.category;if(d){var p=u.filter(function(e){return e.property!==d});e.disabled=!s.length||p.length<1}else e.disabled=!s.length||u.length<2}else e.disabled=!0;break;case"CHART_PIE":var c=r.getCellAreas();if(1===c.length){var f=c[0],h=f.rows,g=f.cols,y=n.category;if(y){var m=g.filter(function(e){return e.property!==y});e.disabled=!h.length||1!==m.length}else e.disabled=!h.length||2!==g.length}else e.disabled=!0}}function n(e){var t=e.$table,r=t.$vxe,a=t._chartModals;if(a){var o=r.modal;a.slice(0).reverse().forEach(o.close)}}function i(t){t.options.forEach(function(e){e.forEach(function(e){o(e,t),e.children&&e.children.forEach(function(e){o(e,t)})})})}var l={install:function(e){var t=e.interceptor,r=e.menus;t.add("beforeDestroy",n),t.add("event.showMenu",i),r.mixin(a)}};e.VXETablePluginCharts=l,"undefined"!=typeof window&&window.VXETable&&window.VXETable.use(l);var u=l;e.default=u});