!function(e,t){if("function"==typeof define&&define.amd)define("vxe-table-plugin-charts",[],t);else if("undefined"!=typeof exports)t();else{t(),e.VXETablePluginCharts={}.default}}(this,function(){"use strict";exports.__esModule=!0;var f=require("xe-utils"),n=require("echarts");function e(r){return function(t){var e=t.menu;this.$XModal({resize:!0,mask:!1,lockView:!1,showFooter:!1,width:600,height:400,title:e.name,slots:{default:function(e,t){return[t("div",{class:"vxe-chart--wrapper"},[t("div",{class:"vxe-chart--panel"})])]}},events:{show:function(){var e=n.init(this.$el.querySelector(".vxe-chart--wrapper"));e.setOption(r(t)),this.$chart=e},close:function(){this.$chart.dispose(),this.$chart=null},hide:function(){this.$chart.dispose(),this.$chart=null},zoom:function(){this.$chart.resize()}}})}}var a={CHART_BAR_X_AXIS:e(function(e){var t=e.$table,r=e.menu,n=t.getMouseCheckeds(),a=n.rows,o=n.columns,i=r.params,s=(void 0===i?{}:i).category,u=t.getColumnByField(s||o[0].property),l=o.filter(function(e){return e.property!==u.property}),p={data:[]},c=[],d={type:"category",data:a.map(function(e){return f.default.get(e,u.property)})};return l.forEach(function(t){p.data.push(t.title),c.push({name:t.title,type:"bar",data:a.map(function(e){return f.default.get(e,t.property)})})}),{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:p,xAxis:d,yAxis:{type:"value"},series:c}}),CHART_BAR_Y_AXIS:e(function(e){var t=e.$table,r=e.menu,n=t.getMouseCheckeds(),a=n.rows,o=n.columns,i=r.params,s=(void 0===i?{}:i).category,u=t.getColumnByField(s||o[0].property),l=o.filter(function(e){return e.property!==u.property}),p={data:[]},c=[],d={type:"category",data:a.map(function(e){return f.default.get(e,u.property)})};return l.forEach(function(t){p.data.push(t.title),c.push({name:t.title,type:"bar",data:a.map(function(e){return f.default.get(e,t.property)})})}),{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:p,xAxis:d,yAxis:{type:"value"},series:c}}),CHART_LINE:e(function(e){var t=e.$table,r=e.menu,n=t.getMouseCheckeds(),a=n.rows,o=n.columns,i=r.params,s=(void 0===i?{}:i).category,u=t.getColumnByField(s||o[0].property),l=o.filter(function(e){return e.property!==u.property}),p={data:[]},c=[],d={type:"category",data:a.map(function(e){return f.default.get(e,u.property)})};return l.forEach(function(t){p.data.push(t.title),c.push({name:t.title,type:"line",data:a.map(function(e){return f.default.get(e,t.property)})})}),{tooltip:{trigger:"axis"},legend:p,toolbox:{feature:{saveAsImage:{}}},xAxis:d,yAxis:{type:"value"},series:c}}),CHART_PIE:e(function(e){var t=e.$table,r=e.menu,n=t.getMouseCheckeds(),a=n.rows,o=n.columns,i=r.params,s=(void 0===i?{}:i).category,u=t.getColumnByField(s||o[0].property),l=o.filter(function(e){return e.property!==u.property})[0],p=a.map(function(e){return f.default.get(e,u.property)}),c=[];return a.forEach(function(e){c.push({name:f.default.get(e,u.property),value:f.default.get(e,l.property)})}),{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,data:p},series:[{name:l.title,type:"pie",radius:"50%",center:["40%","50%"],data:c}]}})};function r(e,t){var r=t.$table,n=e.code,a=e.params,o=void 0===a?{}:a;switch(n){case"CHART_BAR_X_AXIS":case"CHART_BAR_Y_AXIS":case"CHART_LINE":var i=r.getMouseCheckeds(),s=i.rows,u=i.columns,l=o.category;if(l){var p=u.filter(function(e){return e.property!==l});e.disabled=!s.length||p.length<1}else e.disabled=!s.length||u.length<2;break;case"CHART_PIE":var c=r.getMouseCheckeds(),d=(s=c.rows,u=c.columns,o.category);if(d){p=u.filter(function(e){return e.property!==d});e.disabled=!s.length||1!==p.length}else e.disabled=!s.length||2!==u.length}}function o(t){t.options.forEach(function(e){e.forEach(function(e){r(e,t),e.children&&e.children.forEach(function(e){r(e,t)})})})}exports.VXETablePluginCharts={install:function(e){var t=e.interceptor,r=e.menus;if(!e._modal)throw new Error("[vxe-table-plugin-charts] require Modal module.");t.add("event.show_menu",o),r.mixin(a)}},"undefined"!=typeof window&&window.VXETable&&window.VXETable.use(exports.VXETablePluginCharts),exports.default=exports.VXETablePluginCharts});