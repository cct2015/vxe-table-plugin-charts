!function(e,t){if("function"==typeof define&&define.amd)define("vxe-table-plugin-charts",["exports","xe-utils","echarts"],t);else if("undefined"!=typeof exports)t(exports,require("xe-utils"),require("echarts"));else{var r={exports:{}};t(r.exports,e.XEUtils,e.echarts),e.VXETablePluginCharts=r.exports.default}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,f,i){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function r(o){return function(a){var e=a.$table,t=a.menu,r=e.chartModals;r=r||(e.chartModals=[]);var n={id:f.default.uniqueId(),resize:!0,mask:!1,lockView:!1,showFooter:!1,width:600,height:400,title:t.name,slots:{default:function(e,t){return[t("div",{class:"vxe-chart--wrapper"},[t("div",{class:"vxe-chart--panel"})])]}},events:{show:function(e){var t=e.$modal,r=i.default.init(t.$el.querySelector(".vxe-chart--wrapper"));r.setOption(o(a)),t.$chart=r},close:function(e){var t=e.$modal;f.default.remove(r,function(e){return e===t.id}),t.$chart.dispose(),t.$chart=null},hide:function(e){var t=e.$modal;f.default.remove(r,function(e){return e===t.id}),t.$chart.dispose(),t.$chart=null},zoom:function(e){e.$modal.$chart.resize()}}};r.push(n.id),this.$XModal.open?this.$XModal.open(n):this.$XModal(n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginCharts=void 0,f=t(f),i=t(i);var n={CHART_BAR_X_AXIS:r(function(e){var t=e.$table,r=e.menu,a=t.getSelectedRanges?t.getSelectedRanges():t.getMouseCheckeds(),n=a.rows,o=a.columns,i=r.params,l=(void 0===i?{}:i).category,s=t.getColumnByField(l||o[0].property),u=o.filter(function(e){return e.property!==s.property}),d={data:[]},c=[],p={type:"category",data:n.map(function(e){return f.default.get(e,s.property)})};return u.forEach(function(t){d.data.push(t.title),c.push({name:t.title,type:"bar",data:n.map(function(e){return f.default.get(e,t.property)})})}),{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:d,xAxis:p,yAxis:{type:"value"},series:c}}),CHART_BAR_Y_AXIS:r(function(e){var t=e.$table,r=e.menu,a=t.getSelectedRanges?t.getSelectedRanges():t.getMouseCheckeds(),n=a.rows,o=a.columns,i=r.params,l=(void 0===i?{}:i).category,s=t.getColumnByField(l||o[0].property),u=o.filter(function(e){return e.property!==s.property}),d={data:[]},c=[],p={type:"category",data:n.map(function(e){return f.default.get(e,s.property)})};return u.forEach(function(t){d.data.push(t.title),c.push({name:t.title,type:"bar",data:n.map(function(e){return f.default.get(e,t.property)})})}),{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:d,xAxis:p,yAxis:{type:"value"},series:c}}),CHART_LINE:r(function(e){var t=e.$table,r=e.menu,a=t.getSelectedRanges?t.getSelectedRanges():t.getMouseCheckeds(),n=a.rows,o=a.columns,i=r.params,l=(void 0===i?{}:i).category,s=t.getColumnByField(l||o[0].property),u=o.filter(function(e){return e.property!==s.property}),d={data:[]},c=[],p={type:"category",data:n.map(function(e){return f.default.get(e,s.property)})};return u.forEach(function(t){d.data.push(t.title),c.push({name:t.title,type:"line",data:n.map(function(e){return f.default.get(e,t.property)})})}),{tooltip:{trigger:"axis"},legend:d,toolbox:{feature:{saveAsImage:{}}},xAxis:p,yAxis:{type:"value"},series:c}}),CHART_PIE:r(function(e){var t=e.$table,r=e.menu,a=t.getSelectedRanges?t.getSelectedRanges():t.getMouseCheckeds(),n=a.rows,o=a.columns,i=r.params,l=(void 0===i?{}:i).category,s=t.getColumnByField(l||o[0].property),u=o.filter(function(e){return e.property!==s.property})[0],d=n.map(function(e){return f.default.get(e,s.property)}),c=[];return n.forEach(function(e){c.push({name:f.default.get(e,s.property),value:f.default.get(e,u.property)})}),{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,data:d},series:[{name:u.title,type:"pie",radius:"50%",center:["40%","50%"],data:c}]}})};function a(e,t){var r=t.$table,a=e.code,n=e.params,o=void 0===n?{}:n;switch(a){case"CHART_BAR_X_AXIS":case"CHART_BAR_Y_AXIS":case"CHART_LINE":var i=r.getSelectedRanges?r.getSelectedRanges():r.getMouseCheckeds(),l=i.rows,s=i.columns,u=o.category;if(u){var d=s.filter(function(e){return e.property!==u});e.disabled=!l.length||d.length<1}else e.disabled=!l.length||s.length<2;break;case"CHART_PIE":var c=r.getSelectedRanges?r.getSelectedRanges():r.getMouseCheckeds(),p=c.rows,f=c.columns,g=o.category;if(g){var h=f.filter(function(e){return e.property!==g});e.disabled=!p.length||1!==h.length}else e.disabled=!p.length||2!==f.length}}function o(e){var t=e.$table,r=t.$XModal,a=t.chartModals;a&&(r.close?a.forEach(function(e){return r.close(e)}):r.closeAll())}function l(t){t.options.forEach(function(e){e.forEach(function(e){a(e,t),e.children&&e.children.forEach(function(e){a(e,t)})})})}var s={install:function(e){var t=e.v,r=e.interceptor,a=e.menus;if(!e._modal)throw new Error("[vxe-table-plugin-charts] require Modal module.");if("v2"!==t)throw new Error("[vxe-table-plugin-charts] V2 version is required.");r.add("beforeDestroy",o),r.add("event.showMenu",l),a.mixin(n)}};e.VXETablePluginCharts=s,"undefined"!=typeof window&&window.VXETable&&window.VXETable.use(s);var u=s;e.default=u});