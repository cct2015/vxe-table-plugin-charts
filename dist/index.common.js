"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginCharts = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

var echarts = _interopRequireWildcard(require("echarts/lib/echarts"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function createChartModal(getOptions) {
  return function (params) {
    var $table = params.$table,
        menu = params.menu;
    var $vxe = $table.$vxe,
        _chartModals = $table._chartModals;
    var modal = $vxe.modal;

    if (!_chartModals) {
      _chartModals = $table._chartModals = [];
    }

    var opts = {
      id: _xeUtils["default"].uniqueId(),
      resize: true,
      mask: false,
      lockView: false,
      showFooter: false,
      escClosable: true,
      width: 600,
      minWidth: 500,
      height: 400,
      minHeight: 300,
      title: menu.name,
      className: 'vxe-table--ignore-areas-clear vxe-table--charts',
      slots: {
        "default": function _default(params, h) {
          return [h('div', {
            "class": 'vxe-chart--wrapper'
          }, [h('div', {
            "class": 'vxe-chart--panel'
          })])];
        }
      },
      events: {
        show: function show(evntParams) {
          var $modal = evntParams.$modal;
          var elem = $modal.$el.querySelector('.vxe-chart--wrapper');

          if (elem) {
            var $chart = echarts.init(elem);
            $chart.setOption(getOptions(params));
            $modal.$chart = $chart;
          }
        },
        hide: function hide(evntParams) {
          var $modal = evntParams.$modal;

          _xeUtils["default"].remove(_chartModals, function (id) {
            return id === $modal.id;
          });

          if ($modal.$chart) {
            $modal.$chart.dispose();
            $modal.$chart = null;
          }
        },
        zoom: function zoom(evntParams) {
          var $modal = evntParams.$modal;

          if ($modal.$chart) {
            $modal.$chart.resize();
          }
        }
      }
    };

    _chartModals.push(opts.id);

    modal.open(opts);
  };
}

var menuMap = {
  CHART_BAR_X_AXIS: createChartModal(function (params) {
    var $table = params.$table,
        menu = params.menu;
    var cellAreas = $table.getCellAreas();
    var _cellAreas$ = cellAreas[0],
        rows = _cellAreas$.rows,
        cols = _cellAreas$.cols;
    var _menu$params = menu.params,
        chartParams = _menu$params === void 0 ? {} : _menu$params;
    var category = chartParams.category;
    var categoryColumn = $table.getColumnByField(category || cols[0].property);
    var serieColumns = cols.filter(function (column) {
      return column.property !== categoryColumn.property;
    });
    var legendOpts = {
      data: []
    };
    var seriesOpts = [];
    var yAxisOpts = {
      type: 'category',
      data: rows.map(function (row) {
        return _xeUtils["default"].get(row, categoryColumn.property);
      })
    };
    var seriesLabel = {
      normal: {
        show: true
      }
    };
    serieColumns.forEach(function (column) {
      legendOpts.data.push(column.title);
      seriesOpts.push({
        name: column.title,
        type: 'bar',
        label: seriesLabel,
        data: rows.map(function (row) {
          return _xeUtils["default"].get(row, column.property);
        })
      });
    });
    var option = {
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'shadow'
        }
      },
      grid: {
        left: '4%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      legend: legendOpts,
      xAxis: {
        type: 'value'
      },
      yAxis: yAxisOpts,
      series: seriesOpts
    };
    return option;
  }),
  CHART_BAR_Y_AXIS: createChartModal(function (params) {
    var $table = params.$table,
        menu = params.menu;
    var cellAreas = $table.getCellAreas();
    var _cellAreas$2 = cellAreas[0],
        rows = _cellAreas$2.rows,
        cols = _cellAreas$2.cols;
    var _menu$params2 = menu.params,
        chartParams = _menu$params2 === void 0 ? {} : _menu$params2;
    var category = chartParams.category;
    var categoryColumn = $table.getColumnByField(category || cols[0].property);
    var serieColumns = cols.filter(function (column) {
      return column.property !== categoryColumn.property;
    });
    var legendOpts = {
      data: []
    };
    var seriesOpts = [];
    var xAxisOpts = {
      type: 'category',
      data: rows.map(function (row) {
        return _xeUtils["default"].get(row, categoryColumn.property);
      })
    };
    var seriesLabel = {
      normal: {
        show: true
      }
    };
    serieColumns.forEach(function (column) {
      legendOpts.data.push(column.title);
      seriesOpts.push({
        name: column.title,
        type: 'bar',
        label: seriesLabel,
        data: rows.map(function (row) {
          return _xeUtils["default"].get(row, column.property);
        })
      });
    });
    var option = {
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'shadow'
        }
      },
      grid: {
        left: '4%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      legend: legendOpts,
      xAxis: xAxisOpts,
      yAxis: {
        type: 'value'
      },
      series: seriesOpts
    };
    return option;
  }),
  CHART_LINE: createChartModal(function (params) {
    var $table = params.$table,
        menu = params.menu;
    var cellAreas = $table.getCellAreas();
    var _cellAreas$3 = cellAreas[0],
        rows = _cellAreas$3.rows,
        cols = _cellAreas$3.cols;
    var _menu$params3 = menu.params,
        chartParams = _menu$params3 === void 0 ? {} : _menu$params3;
    var category = chartParams.category;
    var categoryColumn = $table.getColumnByField(category || cols[0].property);
    var serieColumns = cols.filter(function (column) {
      return column.property !== categoryColumn.property;
    });
    var legendOpts = {
      data: []
    };
    var seriesOpts = [];
    var xAxisOpts = {
      type: 'category',
      data: rows.map(function (row) {
        return _xeUtils["default"].get(row, categoryColumn.property);
      })
    };
    serieColumns.forEach(function (column) {
      legendOpts.data.push(column.title);
      seriesOpts.push({
        name: column.title,
        type: 'line',
        data: rows.map(function (row) {
          return _xeUtils["default"].get(row, column.property);
        })
      });
    });
    var option = {
      tooltip: {
        trigger: 'axis'
      },
      legend: legendOpts,
      toolbox: {
        feature: {
          saveAsImage: {}
        }
      },
      grid: {
        left: '4%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      xAxis: xAxisOpts,
      yAxis: {
        type: 'value'
      },
      series: seriesOpts
    };
    return option;
  }),
  CHART_PIE: createChartModal(function (params) {
    var $table = params.$table,
        menu = params.menu;
    var cellAreas = $table.getCellAreas();
    var _cellAreas$4 = cellAreas[0],
        rows = _cellAreas$4.rows,
        cols = _cellAreas$4.cols;
    var _menu$params4 = menu.params,
        chartParams = _menu$params4 === void 0 ? {} : _menu$params4;
    var category = chartParams.category;
    var categoryColumn = $table.getColumnByField(category || cols[0].property);
    var serieColumns = cols.filter(function (column) {
      return column.property !== categoryColumn.property;
    });
    var serieColumn = serieColumns[0];
    var legendData = rows.map(function (row) {
      return _xeUtils["default"].get(row, categoryColumn.property);
    });
    var seriesData = [];
    rows.forEach(function (row) {
      seriesData.push({
        name: _xeUtils["default"].get(row, categoryColumn.property),
        value: _xeUtils["default"].get(row, serieColumn.property)
      });
    });
    var option = {
      tooltip: {
        trigger: 'item',
        formatter: '{a} <br/>{b} : {c} ({d}%)'
      },
      legend: {
        type: 'scroll',
        orient: 'vertical',
        right: 10,
        top: 20,
        bottom: 20,
        data: legendData // selected: data.selected

      },
      grid: {
        left: '4%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      series: [{
        name: serieColumn.title,
        type: 'pie',
        radius: '50%',
        center: ['40%', '50%'],
        data: seriesData
      }]
    };
    return option;
  })
};

function checkPrivilege(item, params) {
  var $table = params.$table;
  var code = item.code,
      _item$params = item.params,
      chartParams = _item$params === void 0 ? {} : _item$params;

  switch (code) {
    case 'CHART_BAR_X_AXIS':
    case 'CHART_BAR_Y_AXIS':
    case 'CHART_LINE':
      {
        var cellAreas = $table.getCellAreas();

        if (cellAreas.length === 1) {
          var _cellAreas$5 = cellAreas[0],
              rows = _cellAreas$5.rows,
              cols = _cellAreas$5.cols;
          var category = chartParams.category;

          if (category) {
            var serieColumns = cols.filter(function (column) {
              return column.property !== category;
            });
            item.disabled = !rows.length || serieColumns.length < 1;
          } else {
            item.disabled = !rows.length || cols.length < 2;
          }
        } else {
          item.disabled = true;
        }

        break;
      }

    case 'CHART_PIE':
      {
        var _cellAreas = $table.getCellAreas();

        if (_cellAreas.length === 1) {
          var _cellAreas$6 = _cellAreas[0],
              _rows = _cellAreas$6.rows,
              _cols = _cellAreas$6.cols;
          var _category = chartParams.category;

          if (_category) {
            var _serieColumns = _cols.filter(function (column) {
              return column.property !== _category;
            });

            item.disabled = !_rows.length || _serieColumns.length !== 1;
          } else {
            item.disabled = !_rows.length || _cols.length !== 2;
          }
        } else {
          item.disabled = true;
        }

        break;
      }
  }
}

function handleBeforeDestroyEvent(params) {
  var $table = params.$table;
  var $vxe = $table.$vxe,
      _chartModals = $table._chartModals;

  if (_chartModals) {
    var modal = $vxe.modal;

    _chartModals.slice(0).reverse().forEach(modal.close);
  }
}

function handlePrivilegeEvent(params) {
  params.options.forEach(function (list) {
    list.forEach(function (item) {
      checkPrivilege(item, params);

      if (item.children) {
        item.children.forEach(function (child) {
          checkPrivilege(child, params);
        });
      }
    });
  });
}
/**
 * 基于 vxe-table pro 的图表渲染插件
 */


var VXETablePluginCharts = {
  install: function install(xtable) {
    var interceptor = xtable.interceptor,
        menus = xtable.menus;
    interceptor.add('beforeDestroy', handleBeforeDestroyEvent);
    interceptor.add('event.showMenu', handlePrivilegeEvent);
    menus.mixin(menuMap);
  }
};
exports.VXETablePluginCharts = VXETablePluginCharts;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginCharts);
}

var _default2 = VXETablePluginCharts;
exports["default"] = _default2;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImNyZWF0ZUNoYXJ0TW9kYWwiLCJnZXRPcHRpb25zIiwicGFyYW1zIiwiJHRhYmxlIiwibWVudSIsIiR2eGUiLCJfY2hhcnRNb2RhbHMiLCJtb2RhbCIsIm9wdHMiLCJpZCIsIlhFVXRpbHMiLCJ1bmlxdWVJZCIsInJlc2l6ZSIsIm1hc2siLCJsb2NrVmlldyIsInNob3dGb290ZXIiLCJlc2NDbG9zYWJsZSIsIndpZHRoIiwibWluV2lkdGgiLCJoZWlnaHQiLCJtaW5IZWlnaHQiLCJ0aXRsZSIsIm5hbWUiLCJjbGFzc05hbWUiLCJzbG90cyIsImgiLCJldmVudHMiLCJzaG93IiwiZXZudFBhcmFtcyIsIiRtb2RhbCIsImVsZW0iLCIkZWwiLCJxdWVyeVNlbGVjdG9yIiwiJGNoYXJ0IiwiZWNoYXJ0cyIsImluaXQiLCJzZXRPcHRpb24iLCJoaWRlIiwicmVtb3ZlIiwiZGlzcG9zZSIsInpvb20iLCJwdXNoIiwib3BlbiIsIm1lbnVNYXAiLCJDSEFSVF9CQVJfWF9BWElTIiwiY2VsbEFyZWFzIiwiZ2V0Q2VsbEFyZWFzIiwicm93cyIsImNvbHMiLCJjaGFydFBhcmFtcyIsImNhdGVnb3J5IiwiY2F0ZWdvcnlDb2x1bW4iLCJnZXRDb2x1bW5CeUZpZWxkIiwicHJvcGVydHkiLCJzZXJpZUNvbHVtbnMiLCJmaWx0ZXIiLCJjb2x1bW4iLCJsZWdlbmRPcHRzIiwiZGF0YSIsInNlcmllc09wdHMiLCJ5QXhpc09wdHMiLCJ0eXBlIiwibWFwIiwicm93IiwiZ2V0Iiwic2VyaWVzTGFiZWwiLCJub3JtYWwiLCJmb3JFYWNoIiwibGFiZWwiLCJvcHRpb24iLCJ0b29sdGlwIiwidHJpZ2dlciIsImF4aXNQb2ludGVyIiwiZ3JpZCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsImNvbnRhaW5MYWJlbCIsImxlZ2VuZCIsInhBeGlzIiwieUF4aXMiLCJzZXJpZXMiLCJDSEFSVF9CQVJfWV9BWElTIiwieEF4aXNPcHRzIiwiQ0hBUlRfTElORSIsInRvb2xib3giLCJmZWF0dXJlIiwic2F2ZUFzSW1hZ2UiLCJDSEFSVF9QSUUiLCJzZXJpZUNvbHVtbiIsImxlZ2VuZERhdGEiLCJzZXJpZXNEYXRhIiwidmFsdWUiLCJmb3JtYXR0ZXIiLCJvcmllbnQiLCJ0b3AiLCJyYWRpdXMiLCJjZW50ZXIiLCJjaGVja1ByaXZpbGVnZSIsIml0ZW0iLCJjb2RlIiwibGVuZ3RoIiwiZGlzYWJsZWQiLCJoYW5kbGVCZWZvcmVEZXN0cm95RXZlbnQiLCJzbGljZSIsInJldmVyc2UiLCJjbG9zZSIsImhhbmRsZVByaXZpbGVnZUV2ZW50Iiwib3B0aW9ucyIsImxpc3QiLCJjaGlsZHJlbiIsImNoaWxkIiwiVlhFVGFibGVQbHVnaW5DaGFydHMiLCJpbnN0YWxsIiwieHRhYmxlIiwiaW50ZXJjZXB0b3IiLCJtZW51cyIsImFkZCIsIm1peGluIiwid2luZG93IiwiVlhFVGFibGUiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUVBOztBQVlBOzs7Ozs7OztBQVlBLFNBQVNBLGdCQUFULENBQTJCQyxVQUEzQixFQUF5RjtBQUN2RixTQUFPLFVBQVVDLE1BQVYsRUFBZ0M7QUFBQSxRQUM3QkMsTUFENkIsR0FDWkQsTUFEWSxDQUM3QkMsTUFENkI7QUFBQSxRQUNyQkMsSUFEcUIsR0FDWkYsTUFEWSxDQUNyQkUsSUFEcUI7QUFBQSxRQUUvQkMsSUFGK0IsR0FFUkYsTUFGUSxDQUUvQkUsSUFGK0I7QUFBQSxRQUV6QkMsWUFGeUIsR0FFUkgsTUFGUSxDQUV6QkcsWUFGeUI7QUFBQSxRQUc3QkMsS0FINkIsR0FHbkJGLElBSG1CLENBRzdCRSxLQUg2Qjs7QUFJckMsUUFBSSxDQUFDRCxZQUFMLEVBQW1CO0FBQ2pCQSxNQUFBQSxZQUFZLEdBQUdILE1BQU0sQ0FBQ0csWUFBUCxHQUFzQixFQUFyQztBQUNEOztBQUNELFFBQU1FLElBQUksR0FBRztBQUNYQyxNQUFBQSxFQUFFLEVBQUVDLG9CQUFRQyxRQUFSLEVBRE87QUFFWEMsTUFBQUEsTUFBTSxFQUFFLElBRkc7QUFHWEMsTUFBQUEsSUFBSSxFQUFFLEtBSEs7QUFJWEMsTUFBQUEsUUFBUSxFQUFFLEtBSkM7QUFLWEMsTUFBQUEsVUFBVSxFQUFFLEtBTEQ7QUFNWEMsTUFBQUEsV0FBVyxFQUFFLElBTkY7QUFPWEMsTUFBQUEsS0FBSyxFQUFFLEdBUEk7QUFRWEMsTUFBQUEsUUFBUSxFQUFFLEdBUkM7QUFTWEMsTUFBQUEsTUFBTSxFQUFFLEdBVEc7QUFVWEMsTUFBQUEsU0FBUyxFQUFFLEdBVkE7QUFXWEMsTUFBQUEsS0FBSyxFQUFFakIsSUFBSSxDQUFDa0IsSUFYRDtBQVlYQyxNQUFBQSxTQUFTLEVBQUUsaURBWkE7QUFhWEMsTUFBQUEsS0FBSyxFQUFFO0FBQUEscUNBQ0l0QixNQURKLEVBQ29DdUIsQ0FEcEMsRUFDb0Q7QUFDdkQsaUJBQU8sQ0FDTEEsQ0FBQyxDQUFDLEtBQUQsRUFBUTtBQUNQLHFCQUFPO0FBREEsV0FBUixFQUVFLENBQ0RBLENBQUMsQ0FBQyxLQUFELEVBQVE7QUFDUCxxQkFBTztBQURBLFdBQVIsQ0FEQSxDQUZGLENBREksQ0FBUDtBQVNEO0FBWEksT0FiSTtBQTBCWEMsTUFBQUEsTUFBTSxFQUFFO0FBQ05DLFFBQUFBLElBRE0sZ0JBQ0FDLFVBREEsRUFDNEI7QUFBQSxjQUN4QkMsTUFEd0IsR0FDYkQsVUFEYSxDQUN4QkMsTUFEd0I7QUFFaEMsY0FBTUMsSUFBSSxHQUFvQkQsTUFBTSxDQUFDRSxHQUFQLENBQVdDLGFBQVgsQ0FBeUIscUJBQXpCLENBQTlCOztBQUNBLGNBQUlGLElBQUosRUFBVTtBQUNSLGdCQUFNRyxNQUFNLEdBQUdDLE9BQU8sQ0FBQ0MsSUFBUixDQUFhTCxJQUFiLENBQWY7QUFDQUcsWUFBQUEsTUFBTSxDQUFDRyxTQUFQLENBQWlCbkMsVUFBVSxDQUFDQyxNQUFELENBQTNCO0FBQ0EyQixZQUFBQSxNQUFNLENBQUNJLE1BQVAsR0FBZ0JBLE1BQWhCO0FBQ0Q7QUFDRixTQVRLO0FBVU5JLFFBQUFBLElBVk0sZ0JBVUFULFVBVkEsRUFVNEI7QUFBQSxjQUN4QkMsTUFEd0IsR0FDYkQsVUFEYSxDQUN4QkMsTUFEd0I7O0FBRWhDbkIsOEJBQVE0QixNQUFSLENBQWVoQyxZQUFmLEVBQTZCLFVBQUFHLEVBQUU7QUFBQSxtQkFBSUEsRUFBRSxLQUFLb0IsTUFBTSxDQUFDcEIsRUFBbEI7QUFBQSxXQUEvQjs7QUFDQSxjQUFJb0IsTUFBTSxDQUFDSSxNQUFYLEVBQW1CO0FBQ2pCSixZQUFBQSxNQUFNLENBQUNJLE1BQVAsQ0FBY00sT0FBZDtBQUNBVixZQUFBQSxNQUFNLENBQUNJLE1BQVAsR0FBZ0IsSUFBaEI7QUFDRDtBQUNGLFNBakJLO0FBa0JOTyxRQUFBQSxJQWxCTSxnQkFrQkFaLFVBbEJBLEVBa0I0QjtBQUFBLGNBQ3hCQyxNQUR3QixHQUNiRCxVQURhLENBQ3hCQyxNQUR3Qjs7QUFFaEMsY0FBSUEsTUFBTSxDQUFDSSxNQUFYLEVBQW1CO0FBQ2pCSixZQUFBQSxNQUFNLENBQUNJLE1BQVAsQ0FBY3JCLE1BQWQ7QUFDRDtBQUNGO0FBdkJLO0FBMUJHLEtBQWI7O0FBb0RBTixJQUFBQSxZQUFZLENBQUNtQyxJQUFiLENBQWtCakMsSUFBSSxDQUFDQyxFQUF2Qjs7QUFDQUYsSUFBQUEsS0FBSyxDQUFDbUMsSUFBTixDQUFXbEMsSUFBWDtBQUNELEdBN0REO0FBOEREOztBQU1ELElBQU1tQyxPQUFPLEdBQUc7QUFDZEMsRUFBQUEsZ0JBQWdCLEVBQUU1QyxnQkFBZ0IsQ0FBQyxVQUFDRSxNQUFELEVBQVc7QUFBQSxRQUNwQ0MsTUFEb0MsR0FDbkJELE1BRG1CLENBQ3BDQyxNQURvQztBQUFBLFFBQzVCQyxJQUQ0QixHQUNuQkYsTUFEbUIsQ0FDNUJFLElBRDRCO0FBRTVDLFFBQU15QyxTQUFTLEdBQUcxQyxNQUFNLENBQUMyQyxZQUFQLEVBQWxCO0FBRjRDLHNCQUdyQkQsU0FBUyxDQUFDLENBQUQsQ0FIWTtBQUFBLFFBR3BDRSxJQUhvQyxlQUdwQ0EsSUFIb0M7QUFBQSxRQUc5QkMsSUFIOEIsZUFHOUJBLElBSDhCO0FBQUEsdUJBSVA1QyxJQUpPLENBSXBDRixNQUpvQztBQUFBLFFBSTVCK0MsV0FKNEIsNkJBSWQsRUFKYztBQUFBLFFBS3BDQyxRQUxvQyxHQUt2QkQsV0FMdUIsQ0FLcENDLFFBTG9DO0FBTTVDLFFBQU1DLGNBQWMsR0FBR2hELE1BQU0sQ0FBQ2lELGdCQUFQLENBQXdCRixRQUFRLElBQUlGLElBQUksQ0FBQyxDQUFELENBQUosQ0FBUUssUUFBNUMsQ0FBdkI7QUFDQSxRQUFNQyxZQUFZLEdBQUdOLElBQUksQ0FBQ08sTUFBTCxDQUFZLFVBQUNDLE1BQUQ7QUFBQSxhQUFZQSxNQUFNLENBQUNILFFBQVAsS0FBb0JGLGNBQWMsQ0FBQ0UsUUFBL0M7QUFBQSxLQUFaLENBQXJCO0FBQ0EsUUFBTUksVUFBVSxHQUFlO0FBQzdCQyxNQUFBQSxJQUFJLEVBQUU7QUFEdUIsS0FBL0I7QUFHQSxRQUFNQyxVQUFVLEdBQVUsRUFBMUI7QUFDQSxRQUFNQyxTQUFTLEdBQUc7QUFDaEJDLE1BQUFBLElBQUksRUFBRSxVQURVO0FBRWhCSCxNQUFBQSxJQUFJLEVBQUVYLElBQUksQ0FBQ2UsR0FBTCxDQUFTLFVBQUNDLEdBQUQ7QUFBQSxlQUFTckQsb0JBQVFzRCxHQUFSLENBQVlELEdBQVosRUFBaUJaLGNBQWMsQ0FBQ0UsUUFBaEMsQ0FBVDtBQUFBLE9BQVQ7QUFGVSxLQUFsQjtBQUlBLFFBQU1ZLFdBQVcsR0FBRztBQUNsQkMsTUFBQUEsTUFBTSxFQUFFO0FBQ052QyxRQUFBQSxJQUFJLEVBQUU7QUFEQTtBQURVLEtBQXBCO0FBS0EyQixJQUFBQSxZQUFZLENBQUNhLE9BQWIsQ0FBcUIsVUFBQ1gsTUFBRCxFQUFXO0FBQzlCQyxNQUFBQSxVQUFVLENBQUNDLElBQVgsQ0FBZ0JqQixJQUFoQixDQUFxQmUsTUFBTSxDQUFDbkMsS0FBNUI7QUFDQXNDLE1BQUFBLFVBQVUsQ0FBQ2xCLElBQVgsQ0FBZ0I7QUFDZG5CLFFBQUFBLElBQUksRUFBRWtDLE1BQU0sQ0FBQ25DLEtBREM7QUFFZHdDLFFBQUFBLElBQUksRUFBRSxLQUZRO0FBR2RPLFFBQUFBLEtBQUssRUFBRUgsV0FITztBQUlkUCxRQUFBQSxJQUFJLEVBQUVYLElBQUksQ0FBQ2UsR0FBTCxDQUFTLFVBQUNDLEdBQUQ7QUFBQSxpQkFBU3JELG9CQUFRc0QsR0FBUixDQUFZRCxHQUFaLEVBQWlCUCxNQUFNLENBQUNILFFBQXhCLENBQVQ7QUFBQSxTQUFUO0FBSlEsT0FBaEI7QUFNRCxLQVJEO0FBU0EsUUFBTWdCLE1BQU0sR0FBRztBQUNiQyxNQUFBQSxPQUFPLEVBQUU7QUFDUEMsUUFBQUEsT0FBTyxFQUFFLE1BREY7QUFFUEMsUUFBQUEsV0FBVyxFQUFFO0FBQ1hYLFVBQUFBLElBQUksRUFBRTtBQURLO0FBRk4sT0FESTtBQU9iWSxNQUFBQSxJQUFJLEVBQUU7QUFDSkMsUUFBQUEsSUFBSSxFQUFFLElBREY7QUFFSkMsUUFBQUEsS0FBSyxFQUFFLElBRkg7QUFHSkMsUUFBQUEsTUFBTSxFQUFFLElBSEo7QUFJSkMsUUFBQUEsWUFBWSxFQUFFO0FBSlYsT0FQTztBQWFiQyxNQUFBQSxNQUFNLEVBQUVyQixVQWJLO0FBY2JzQixNQUFBQSxLQUFLLEVBQUU7QUFDTGxCLFFBQUFBLElBQUksRUFBRTtBQURELE9BZE07QUFpQmJtQixNQUFBQSxLQUFLLEVBQUVwQixTQWpCTTtBQWtCYnFCLE1BQUFBLE1BQU0sRUFBRXRCO0FBbEJLLEtBQWY7QUFvQkEsV0FBT1UsTUFBUDtBQUNELEdBbkRpQyxDQURwQjtBQXFEZGEsRUFBQUEsZ0JBQWdCLEVBQUVsRixnQkFBZ0IsQ0FBQyxVQUFDRSxNQUFELEVBQVc7QUFBQSxRQUNwQ0MsTUFEb0MsR0FDbkJELE1BRG1CLENBQ3BDQyxNQURvQztBQUFBLFFBQzVCQyxJQUQ0QixHQUNuQkYsTUFEbUIsQ0FDNUJFLElBRDRCO0FBRTVDLFFBQU15QyxTQUFTLEdBQUcxQyxNQUFNLENBQUMyQyxZQUFQLEVBQWxCO0FBRjRDLHVCQUdyQkQsU0FBUyxDQUFDLENBQUQsQ0FIWTtBQUFBLFFBR3BDRSxJQUhvQyxnQkFHcENBLElBSG9DO0FBQUEsUUFHOUJDLElBSDhCLGdCQUc5QkEsSUFIOEI7QUFBQSx3QkFJUDVDLElBSk8sQ0FJcENGLE1BSm9DO0FBQUEsUUFJNUIrQyxXQUo0Qiw4QkFJZCxFQUpjO0FBQUEsUUFLcENDLFFBTG9DLEdBS3ZCRCxXQUx1QixDQUtwQ0MsUUFMb0M7QUFNNUMsUUFBTUMsY0FBYyxHQUFHaEQsTUFBTSxDQUFDaUQsZ0JBQVAsQ0FBd0JGLFFBQVEsSUFBSUYsSUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRSyxRQUE1QyxDQUF2QjtBQUNBLFFBQU1DLFlBQVksR0FBR04sSUFBSSxDQUFDTyxNQUFMLENBQVksVUFBQ0MsTUFBRDtBQUFBLGFBQVlBLE1BQU0sQ0FBQ0gsUUFBUCxLQUFvQkYsY0FBYyxDQUFDRSxRQUEvQztBQUFBLEtBQVosQ0FBckI7QUFDQSxRQUFNSSxVQUFVLEdBQWU7QUFDN0JDLE1BQUFBLElBQUksRUFBRTtBQUR1QixLQUEvQjtBQUdBLFFBQU1DLFVBQVUsR0FBVSxFQUExQjtBQUNBLFFBQU13QixTQUFTLEdBQUc7QUFDaEJ0QixNQUFBQSxJQUFJLEVBQUUsVUFEVTtBQUVoQkgsTUFBQUEsSUFBSSxFQUFFWCxJQUFJLENBQUNlLEdBQUwsQ0FBUyxVQUFDQyxHQUFEO0FBQUEsZUFBU3JELG9CQUFRc0QsR0FBUixDQUFZRCxHQUFaLEVBQWlCWixjQUFjLENBQUNFLFFBQWhDLENBQVQ7QUFBQSxPQUFUO0FBRlUsS0FBbEI7QUFJQSxRQUFNWSxXQUFXLEdBQUc7QUFDbEJDLE1BQUFBLE1BQU0sRUFBRTtBQUNOdkMsUUFBQUEsSUFBSSxFQUFFO0FBREE7QUFEVSxLQUFwQjtBQUtBMkIsSUFBQUEsWUFBWSxDQUFDYSxPQUFiLENBQXFCLFVBQUNYLE1BQUQsRUFBVztBQUM5QkMsTUFBQUEsVUFBVSxDQUFDQyxJQUFYLENBQWdCakIsSUFBaEIsQ0FBcUJlLE1BQU0sQ0FBQ25DLEtBQTVCO0FBQ0FzQyxNQUFBQSxVQUFVLENBQUNsQixJQUFYLENBQWdCO0FBQ2RuQixRQUFBQSxJQUFJLEVBQUVrQyxNQUFNLENBQUNuQyxLQURDO0FBRWR3QyxRQUFBQSxJQUFJLEVBQUUsS0FGUTtBQUdkTyxRQUFBQSxLQUFLLEVBQUVILFdBSE87QUFJZFAsUUFBQUEsSUFBSSxFQUFFWCxJQUFJLENBQUNlLEdBQUwsQ0FBUyxVQUFDQyxHQUFEO0FBQUEsaUJBQVNyRCxvQkFBUXNELEdBQVIsQ0FBWUQsR0FBWixFQUFpQlAsTUFBTSxDQUFDSCxRQUF4QixDQUFUO0FBQUEsU0FBVDtBQUpRLE9BQWhCO0FBTUQsS0FSRDtBQVNBLFFBQU1nQixNQUFNLEdBQUc7QUFDYkMsTUFBQUEsT0FBTyxFQUFFO0FBQ1BDLFFBQUFBLE9BQU8sRUFBRSxNQURGO0FBRVBDLFFBQUFBLFdBQVcsRUFBRTtBQUNYWCxVQUFBQSxJQUFJLEVBQUU7QUFESztBQUZOLE9BREk7QUFPYlksTUFBQUEsSUFBSSxFQUFFO0FBQ0pDLFFBQUFBLElBQUksRUFBRSxJQURGO0FBRUpDLFFBQUFBLEtBQUssRUFBRSxJQUZIO0FBR0pDLFFBQUFBLE1BQU0sRUFBRSxJQUhKO0FBSUpDLFFBQUFBLFlBQVksRUFBRTtBQUpWLE9BUE87QUFhYkMsTUFBQUEsTUFBTSxFQUFFckIsVUFiSztBQWNic0IsTUFBQUEsS0FBSyxFQUFFSSxTQWRNO0FBZWJILE1BQUFBLEtBQUssRUFBRTtBQUNMbkIsUUFBQUEsSUFBSSxFQUFFO0FBREQsT0FmTTtBQWtCYm9CLE1BQUFBLE1BQU0sRUFBRXRCO0FBbEJLLEtBQWY7QUFvQkEsV0FBT1UsTUFBUDtBQUNELEdBbkRpQyxDQXJEcEI7QUF5R2RlLEVBQUFBLFVBQVUsRUFBRXBGLGdCQUFnQixDQUFDLFVBQUNFLE1BQUQsRUFBVztBQUFBLFFBQzlCQyxNQUQ4QixHQUNiRCxNQURhLENBQzlCQyxNQUQ4QjtBQUFBLFFBQ3RCQyxJQURzQixHQUNiRixNQURhLENBQ3RCRSxJQURzQjtBQUV0QyxRQUFNeUMsU0FBUyxHQUFHMUMsTUFBTSxDQUFDMkMsWUFBUCxFQUFsQjtBQUZzQyx1QkFHZkQsU0FBUyxDQUFDLENBQUQsQ0FITTtBQUFBLFFBRzlCRSxJQUg4QixnQkFHOUJBLElBSDhCO0FBQUEsUUFHeEJDLElBSHdCLGdCQUd4QkEsSUFId0I7QUFBQSx3QkFJRDVDLElBSkMsQ0FJOUJGLE1BSjhCO0FBQUEsUUFJdEIrQyxXQUpzQiw4QkFJUixFQUpRO0FBQUEsUUFLOUJDLFFBTDhCLEdBS2pCRCxXQUxpQixDQUs5QkMsUUFMOEI7QUFNdEMsUUFBTUMsY0FBYyxHQUFHaEQsTUFBTSxDQUFDaUQsZ0JBQVAsQ0FBd0JGLFFBQVEsSUFBSUYsSUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRSyxRQUE1QyxDQUF2QjtBQUNBLFFBQU1DLFlBQVksR0FBR04sSUFBSSxDQUFDTyxNQUFMLENBQVksVUFBQ0MsTUFBRDtBQUFBLGFBQVlBLE1BQU0sQ0FBQ0gsUUFBUCxLQUFvQkYsY0FBYyxDQUFDRSxRQUEvQztBQUFBLEtBQVosQ0FBckI7QUFDQSxRQUFNSSxVQUFVLEdBQWU7QUFDN0JDLE1BQUFBLElBQUksRUFBRTtBQUR1QixLQUEvQjtBQUdBLFFBQU1DLFVBQVUsR0FBVSxFQUExQjtBQUNBLFFBQU13QixTQUFTLEdBQUc7QUFDaEJ0QixNQUFBQSxJQUFJLEVBQUUsVUFEVTtBQUVoQkgsTUFBQUEsSUFBSSxFQUFFWCxJQUFJLENBQUNlLEdBQUwsQ0FBUyxVQUFDQyxHQUFEO0FBQUEsZUFBU3JELG9CQUFRc0QsR0FBUixDQUFZRCxHQUFaLEVBQWlCWixjQUFjLENBQUNFLFFBQWhDLENBQVQ7QUFBQSxPQUFUO0FBRlUsS0FBbEI7QUFJQUMsSUFBQUEsWUFBWSxDQUFDYSxPQUFiLENBQXFCLFVBQUNYLE1BQUQsRUFBVztBQUM5QkMsTUFBQUEsVUFBVSxDQUFDQyxJQUFYLENBQWdCakIsSUFBaEIsQ0FBcUJlLE1BQU0sQ0FBQ25DLEtBQTVCO0FBQ0FzQyxNQUFBQSxVQUFVLENBQUNsQixJQUFYLENBQWdCO0FBQ2RuQixRQUFBQSxJQUFJLEVBQUVrQyxNQUFNLENBQUNuQyxLQURDO0FBRWR3QyxRQUFBQSxJQUFJLEVBQUUsTUFGUTtBQUdkSCxRQUFBQSxJQUFJLEVBQUVYLElBQUksQ0FBQ2UsR0FBTCxDQUFTLFVBQUNDLEdBQUQ7QUFBQSxpQkFBU3JELG9CQUFRc0QsR0FBUixDQUFZRCxHQUFaLEVBQWlCUCxNQUFNLENBQUNILFFBQXhCLENBQVQ7QUFBQSxTQUFUO0FBSFEsT0FBaEI7QUFLRCxLQVBEO0FBUUEsUUFBTWdCLE1BQU0sR0FBRztBQUNiQyxNQUFBQSxPQUFPLEVBQUU7QUFDUEMsUUFBQUEsT0FBTyxFQUFFO0FBREYsT0FESTtBQUliTyxNQUFBQSxNQUFNLEVBQUVyQixVQUpLO0FBS2I0QixNQUFBQSxPQUFPLEVBQUU7QUFDUEMsUUFBQUEsT0FBTyxFQUFFO0FBQ1BDLFVBQUFBLFdBQVcsRUFBRTtBQUROO0FBREYsT0FMSTtBQVViZCxNQUFBQSxJQUFJLEVBQUU7QUFDSkMsUUFBQUEsSUFBSSxFQUFFLElBREY7QUFFSkMsUUFBQUEsS0FBSyxFQUFFLElBRkg7QUFHSkMsUUFBQUEsTUFBTSxFQUFFLElBSEo7QUFJSkMsUUFBQUEsWUFBWSxFQUFFO0FBSlYsT0FWTztBQWdCYkUsTUFBQUEsS0FBSyxFQUFFSSxTQWhCTTtBQWlCYkgsTUFBQUEsS0FBSyxFQUFFO0FBQ0xuQixRQUFBQSxJQUFJLEVBQUU7QUFERCxPQWpCTTtBQW9CYm9CLE1BQUFBLE1BQU0sRUFBRXRCO0FBcEJLLEtBQWY7QUFzQkEsV0FBT1UsTUFBUDtBQUNELEdBL0MyQixDQXpHZDtBQXlKZG1CLEVBQUFBLFNBQVMsRUFBRXhGLGdCQUFnQixDQUFDLFVBQUNFLE1BQUQsRUFBVztBQUFBLFFBQzdCQyxNQUQ2QixHQUNaRCxNQURZLENBQzdCQyxNQUQ2QjtBQUFBLFFBQ3JCQyxJQURxQixHQUNaRixNQURZLENBQ3JCRSxJQURxQjtBQUVyQyxRQUFNeUMsU0FBUyxHQUFHMUMsTUFBTSxDQUFDMkMsWUFBUCxFQUFsQjtBQUZxQyx1QkFHZEQsU0FBUyxDQUFDLENBQUQsQ0FISztBQUFBLFFBRzdCRSxJQUg2QixnQkFHN0JBLElBSDZCO0FBQUEsUUFHdkJDLElBSHVCLGdCQUd2QkEsSUFIdUI7QUFBQSx3QkFJQTVDLElBSkEsQ0FJN0JGLE1BSjZCO0FBQUEsUUFJckIrQyxXQUpxQiw4QkFJUCxFQUpPO0FBQUEsUUFLN0JDLFFBTDZCLEdBS2hCRCxXQUxnQixDQUs3QkMsUUFMNkI7QUFNckMsUUFBTUMsY0FBYyxHQUFHaEQsTUFBTSxDQUFDaUQsZ0JBQVAsQ0FBd0JGLFFBQVEsSUFBSUYsSUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRSyxRQUE1QyxDQUF2QjtBQUNBLFFBQU1DLFlBQVksR0FBR04sSUFBSSxDQUFDTyxNQUFMLENBQVksVUFBQ0MsTUFBRDtBQUFBLGFBQVlBLE1BQU0sQ0FBQ0gsUUFBUCxLQUFvQkYsY0FBYyxDQUFDRSxRQUEvQztBQUFBLEtBQVosQ0FBckI7QUFDQSxRQUFNb0MsV0FBVyxHQUFHbkMsWUFBWSxDQUFDLENBQUQsQ0FBaEM7QUFDQSxRQUFNb0MsVUFBVSxHQUFHM0MsSUFBSSxDQUFDZSxHQUFMLENBQVMsVUFBQ0MsR0FBRDtBQUFBLGFBQVNyRCxvQkFBUXNELEdBQVIsQ0FBWUQsR0FBWixFQUFpQlosY0FBYyxDQUFDRSxRQUFoQyxDQUFUO0FBQUEsS0FBVCxDQUFuQjtBQUNBLFFBQU1zQyxVQUFVLEdBQVUsRUFBMUI7QUFDQTVDLElBQUFBLElBQUksQ0FBQ29CLE9BQUwsQ0FBYSxVQUFDSixHQUFELEVBQVE7QUFDbkI0QixNQUFBQSxVQUFVLENBQUNsRCxJQUFYLENBQWdCO0FBQ2RuQixRQUFBQSxJQUFJLEVBQUVaLG9CQUFRc0QsR0FBUixDQUFZRCxHQUFaLEVBQWlCWixjQUFjLENBQUNFLFFBQWhDLENBRFE7QUFFZHVDLFFBQUFBLEtBQUssRUFBRWxGLG9CQUFRc0QsR0FBUixDQUFZRCxHQUFaLEVBQWlCMEIsV0FBVyxDQUFDcEMsUUFBN0I7QUFGTyxPQUFoQjtBQUlELEtBTEQ7QUFNQSxRQUFNZ0IsTUFBTSxHQUFHO0FBQ2JDLE1BQUFBLE9BQU8sRUFBRTtBQUNQQyxRQUFBQSxPQUFPLEVBQUUsTUFERjtBQUVQc0IsUUFBQUEsU0FBUyxFQUFFO0FBRkosT0FESTtBQUtiZixNQUFBQSxNQUFNLEVBQUU7QUFDTmpCLFFBQUFBLElBQUksRUFBRSxRQURBO0FBRU5pQyxRQUFBQSxNQUFNLEVBQUUsVUFGRjtBQUdObkIsUUFBQUEsS0FBSyxFQUFFLEVBSEQ7QUFJTm9CLFFBQUFBLEdBQUcsRUFBRSxFQUpDO0FBS05uQixRQUFBQSxNQUFNLEVBQUUsRUFMRjtBQU1ObEIsUUFBQUEsSUFBSSxFQUFFZ0MsVUFOQSxDQU9OOztBQVBNLE9BTEs7QUFjYmpCLE1BQUFBLElBQUksRUFBRTtBQUNKQyxRQUFBQSxJQUFJLEVBQUUsSUFERjtBQUVKQyxRQUFBQSxLQUFLLEVBQUUsSUFGSDtBQUdKQyxRQUFBQSxNQUFNLEVBQUUsSUFISjtBQUlKQyxRQUFBQSxZQUFZLEVBQUU7QUFKVixPQWRPO0FBb0JiSSxNQUFBQSxNQUFNLEVBQUUsQ0FDTjtBQUNFM0QsUUFBQUEsSUFBSSxFQUFFbUUsV0FBVyxDQUFDcEUsS0FEcEI7QUFFRXdDLFFBQUFBLElBQUksRUFBRSxLQUZSO0FBR0VtQyxRQUFBQSxNQUFNLEVBQUUsS0FIVjtBQUlFQyxRQUFBQSxNQUFNLEVBQUUsQ0FBQyxLQUFELEVBQVEsS0FBUixDQUpWO0FBS0V2QyxRQUFBQSxJQUFJLEVBQUVpQztBQUxSLE9BRE07QUFwQkssS0FBZjtBQThCQSxXQUFPdEIsTUFBUDtBQUNELEdBaEQwQjtBQXpKYixDQUFoQjs7QUE0TUEsU0FBUzZCLGNBQVQsQ0FBeUJDLElBQXpCLEVBQWtFakcsTUFBbEUsRUFBK0Y7QUFBQSxNQUNyRkMsTUFEcUYsR0FDMUVELE1BRDBFLENBQ3JGQyxNQURxRjtBQUFBLE1BRXJGaUcsSUFGcUYsR0FFbERELElBRmtELENBRXJGQyxJQUZxRjtBQUFBLHFCQUVsREQsSUFGa0QsQ0FFL0VqRyxNQUYrRTtBQUFBLE1BRXZFK0MsV0FGdUUsNkJBRXpELEVBRnlEOztBQUc3RixVQUFRbUQsSUFBUjtBQUNFLFNBQUssa0JBQUw7QUFDQSxTQUFLLGtCQUFMO0FBQ0EsU0FBSyxZQUFMO0FBQW1CO0FBQ2pCLFlBQU12RCxTQUFTLEdBQUcxQyxNQUFNLENBQUMyQyxZQUFQLEVBQWxCOztBQUNBLFlBQUlELFNBQVMsQ0FBQ3dELE1BQVYsS0FBcUIsQ0FBekIsRUFBNEI7QUFBQSw2QkFDSHhELFNBQVMsQ0FBQyxDQUFELENBRE47QUFBQSxjQUNsQkUsSUFEa0IsZ0JBQ2xCQSxJQURrQjtBQUFBLGNBQ1pDLElBRFksZ0JBQ1pBLElBRFk7QUFBQSxjQUVsQkUsUUFGa0IsR0FFTEQsV0FGSyxDQUVsQkMsUUFGa0I7O0FBRzFCLGNBQUlBLFFBQUosRUFBYztBQUNaLGdCQUFNSSxZQUFZLEdBQUdOLElBQUksQ0FBQ08sTUFBTCxDQUFZLFVBQUNDLE1BQUQ7QUFBQSxxQkFBWUEsTUFBTSxDQUFDSCxRQUFQLEtBQW9CSCxRQUFoQztBQUFBLGFBQVosQ0FBckI7QUFDQWlELFlBQUFBLElBQUksQ0FBQ0csUUFBTCxHQUFnQixDQUFDdkQsSUFBSSxDQUFDc0QsTUFBTixJQUFnQi9DLFlBQVksQ0FBQytDLE1BQWIsR0FBc0IsQ0FBdEQ7QUFDRCxXQUhELE1BR087QUFDTEYsWUFBQUEsSUFBSSxDQUFDRyxRQUFMLEdBQWdCLENBQUN2RCxJQUFJLENBQUNzRCxNQUFOLElBQWdCckQsSUFBSSxDQUFDcUQsTUFBTCxHQUFjLENBQTlDO0FBQ0Q7QUFDRixTQVRELE1BU087QUFDTEYsVUFBQUEsSUFBSSxDQUFDRyxRQUFMLEdBQWdCLElBQWhCO0FBQ0Q7O0FBQ0Q7QUFDRDs7QUFDRCxTQUFLLFdBQUw7QUFBa0I7QUFDaEIsWUFBTXpELFVBQVMsR0FBRzFDLE1BQU0sQ0FBQzJDLFlBQVAsRUFBbEI7O0FBQ0EsWUFBSUQsVUFBUyxDQUFDd0QsTUFBVixLQUFxQixDQUF6QixFQUE0QjtBQUFBLDZCQUNIeEQsVUFBUyxDQUFDLENBQUQsQ0FETjtBQUFBLGNBQ2xCRSxLQURrQixnQkFDbEJBLElBRGtCO0FBQUEsY0FDWkMsS0FEWSxnQkFDWkEsSUFEWTtBQUFBLGNBRWxCRSxTQUZrQixHQUVMRCxXQUZLLENBRWxCQyxRQUZrQjs7QUFHMUIsY0FBSUEsU0FBSixFQUFjO0FBQ1osZ0JBQU1JLGFBQVksR0FBR04sS0FBSSxDQUFDTyxNQUFMLENBQVksVUFBQ0MsTUFBRDtBQUFBLHFCQUFZQSxNQUFNLENBQUNILFFBQVAsS0FBb0JILFNBQWhDO0FBQUEsYUFBWixDQUFyQjs7QUFDQWlELFlBQUFBLElBQUksQ0FBQ0csUUFBTCxHQUFnQixDQUFDdkQsS0FBSSxDQUFDc0QsTUFBTixJQUFnQi9DLGFBQVksQ0FBQytDLE1BQWIsS0FBd0IsQ0FBeEQ7QUFDRCxXQUhELE1BR087QUFDTEYsWUFBQUEsSUFBSSxDQUFDRyxRQUFMLEdBQWdCLENBQUN2RCxLQUFJLENBQUNzRCxNQUFOLElBQWdCckQsS0FBSSxDQUFDcUQsTUFBTCxLQUFnQixDQUFoRDtBQUNEO0FBQ0YsU0FURCxNQVNPO0FBQ0xGLFVBQUFBLElBQUksQ0FBQ0csUUFBTCxHQUFnQixJQUFoQjtBQUNEOztBQUNEO0FBQ0Q7QUFsQ0g7QUFvQ0Q7O0FBRUQsU0FBU0Msd0JBQVQsQ0FBbUNyRyxNQUFuQyxFQUE0RDtBQUFBLE1BQ2xEQyxNQURrRCxHQUN2Q0QsTUFEdUMsQ0FDbERDLE1BRGtEO0FBQUEsTUFFcERFLElBRm9ELEdBRTdCRixNQUY2QixDQUVwREUsSUFGb0Q7QUFBQSxNQUU5Q0MsWUFGOEMsR0FFN0JILE1BRjZCLENBRTlDRyxZQUY4Qzs7QUFHMUQsTUFBSUEsWUFBSixFQUFrQjtBQUFBLFFBQ1JDLEtBRFEsR0FDRUYsSUFERixDQUNSRSxLQURROztBQUVoQkQsSUFBQUEsWUFBWSxDQUFDa0csS0FBYixDQUFtQixDQUFuQixFQUFzQkMsT0FBdEIsR0FBZ0N0QyxPQUFoQyxDQUF3QzVELEtBQUssQ0FBQ21HLEtBQTlDO0FBQ0Q7QUFDRjs7QUFFRCxTQUFTQyxvQkFBVCxDQUErQnpHLE1BQS9CLEVBQTREO0FBQzFEQSxFQUFBQSxNQUFNLENBQUMwRyxPQUFQLENBQWV6QyxPQUFmLENBQXVCLFVBQUMwQyxJQUFELEVBQVM7QUFDOUJBLElBQUFBLElBQUksQ0FBQzFDLE9BQUwsQ0FBYSxVQUFDZ0MsSUFBRCxFQUFTO0FBQ3BCRCxNQUFBQSxjQUFjLENBQUNDLElBQUQsRUFBT2pHLE1BQVAsQ0FBZDs7QUFDQSxVQUFJaUcsSUFBSSxDQUFDVyxRQUFULEVBQW1CO0FBQ2pCWCxRQUFBQSxJQUFJLENBQUNXLFFBQUwsQ0FBYzNDLE9BQWQsQ0FBc0IsVUFBQzRDLEtBQUQsRUFBVTtBQUM5QmIsVUFBQUEsY0FBYyxDQUFDYSxLQUFELEVBQVE3RyxNQUFSLENBQWQ7QUFDRCxTQUZEO0FBR0Q7QUFDRixLQVBEO0FBUUQsR0FURDtBQVVEO0FBRUQ7Ozs7O0FBR08sSUFBTThHLG9CQUFvQixHQUFHO0FBQ2xDQyxFQUFBQSxPQURrQyxtQkFDeEJDLE1BRHdCLEVBQ0Q7QUFBQSxRQUN2QkMsV0FEdUIsR0FDQUQsTUFEQSxDQUN2QkMsV0FEdUI7QUFBQSxRQUNWQyxLQURVLEdBQ0FGLE1BREEsQ0FDVkUsS0FEVTtBQUUvQkQsSUFBQUEsV0FBVyxDQUFDRSxHQUFaLENBQWdCLGVBQWhCLEVBQWlDZCx3QkFBakM7QUFDQVksSUFBQUEsV0FBVyxDQUFDRSxHQUFaLENBQWdCLGdCQUFoQixFQUFrQ1Ysb0JBQWxDO0FBQ0FTLElBQUFBLEtBQUssQ0FBQ0UsS0FBTixDQUFZM0UsT0FBWjtBQUNEO0FBTmlDLENBQTdCOzs7QUFTUCxJQUFJLE9BQU80RSxNQUFQLEtBQWtCLFdBQWxCLElBQWlDQSxNQUFNLENBQUNDLFFBQTVDLEVBQXNEO0FBQ3BERCxFQUFBQSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLEdBQWhCLENBQW9CVCxvQkFBcEI7QUFDRDs7Z0JBRWNBLG9CIiwiZmlsZSI6ImluZGV4LmNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXHJcbmltcG9ydCB7IENyZWF0ZUVsZW1lbnQgfSBmcm9tICd2dWUnXHJcbmltcG9ydCBYRVV0aWxzIGZyb20gJ3hlLXV0aWxzL21ldGhvZHMveGUtdXRpbHMnXHJcbmltcG9ydCB7XHJcbiAgVlhFVGFibGUsXHJcbiAgSW50ZXJjZXB0b3JQYXJhbXMsXHJcbiAgSW50ZXJjZXB0b3JNZW51UGFyYW1zLFxyXG4gIE1lbnVMaW5rUGFyYW1zLFxyXG4gIE1lbnVGaXJzdE9wdGlvbixcclxuICBNZW51Q2hpbGRPcHRpb24sXHJcbiAgQ29sdW1uQ29uZmlnLFxyXG4gIE1vZGFsRXZlbnRQYXJhbXMsXHJcbiAgTW9kYWxEZWZhdWx0U2xvdFBhcmFtc1xyXG59IGZyb20gJ3Z4ZS10YWJsZS9saWIvdnhlLXRhYmxlJ1xyXG5pbXBvcnQgKiBhcyBlY2hhcnRzIGZyb20gJ2VjaGFydHMvbGliL2VjaGFydHMnXHJcbi8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuXHJcbmRlY2xhcmUgbW9kdWxlICd2eGUtdGFibGUvbGliL3Z4ZS10YWJsZScge1xyXG4gIGludGVyZmFjZSBUYWJsZSB7XHJcbiAgICBfY2hhcnRNb2RhbHM/OiBzdHJpbmdbXTtcclxuICB9XHJcbiAgaW50ZXJmYWNlIE1vZGFsIHtcclxuICAgICRjaGFydDogZWNoYXJ0cy5FQ2hhcnRzIHwgbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNoYXJ0TW9kYWwgKGdldE9wdGlvbnM6IChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSA9PiB7IFtrZXQ6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIChwYXJhbXM6IE1lbnVMaW5rUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSB9ID0gcGFyYW1zXHJcbiAgICBsZXQgeyAkdnhlLCBfY2hhcnRNb2RhbHMgfSA9ICR0YWJsZVxyXG4gICAgY29uc3QgeyBtb2RhbCB9ID0gJHZ4ZVxyXG4gICAgaWYgKCFfY2hhcnRNb2RhbHMpIHtcclxuICAgICAgX2NoYXJ0TW9kYWxzID0gJHRhYmxlLl9jaGFydE1vZGFscyA9IFtdXHJcbiAgICB9XHJcbiAgICBjb25zdCBvcHRzID0ge1xyXG4gICAgICBpZDogWEVVdGlscy51bmlxdWVJZCgpLFxyXG4gICAgICByZXNpemU6IHRydWUsXHJcbiAgICAgIG1hc2s6IGZhbHNlLFxyXG4gICAgICBsb2NrVmlldzogZmFsc2UsXHJcbiAgICAgIHNob3dGb290ZXI6IGZhbHNlLFxyXG4gICAgICBlc2NDbG9zYWJsZTogdHJ1ZSxcclxuICAgICAgd2lkdGg6IDYwMCxcclxuICAgICAgbWluV2lkdGg6IDUwMCxcclxuICAgICAgaGVpZ2h0OiA0MDAsXHJcbiAgICAgIG1pbkhlaWdodDogMzAwLFxyXG4gICAgICB0aXRsZTogbWVudS5uYW1lLFxyXG4gICAgICBjbGFzc05hbWU6ICd2eGUtdGFibGUtLWlnbm9yZS1hcmVhcy1jbGVhciB2eGUtdGFibGUtLWNoYXJ0cycsXHJcbiAgICAgIHNsb3RzOiB7XHJcbiAgICAgICAgZGVmYXVsdCAocGFyYW1zOiBNb2RhbERlZmF1bHRTbG90UGFyYW1zLCBoOiBDcmVhdGVFbGVtZW50KSB7XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBoKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtY2hhcnQtLXdyYXBwZXInXHJcbiAgICAgICAgICAgIH0sIFtcclxuICAgICAgICAgICAgICBoKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS1jaGFydC0tcGFuZWwnXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGV2ZW50czoge1xyXG4gICAgICAgIHNob3cgKGV2bnRQYXJhbXM6IE1vZGFsRXZlbnRQYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgJG1vZGFsIH0gPSBldm50UGFyYW1zXHJcbiAgICAgICAgICBjb25zdCBlbGVtID0gPEhUTUxEaXZFbGVtZW50PiAkbW9kYWwuJGVsLnF1ZXJ5U2VsZWN0b3IoJy52eGUtY2hhcnQtLXdyYXBwZXInKVxyXG4gICAgICAgICAgaWYgKGVsZW0pIHtcclxuICAgICAgICAgICAgY29uc3QgJGNoYXJ0ID0gZWNoYXJ0cy5pbml0KGVsZW0pXHJcbiAgICAgICAgICAgICRjaGFydC5zZXRPcHRpb24oZ2V0T3B0aW9ucyhwYXJhbXMpKVxyXG4gICAgICAgICAgICAkbW9kYWwuJGNoYXJ0ID0gJGNoYXJ0XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoaWRlIChldm50UGFyYW1zOiBNb2RhbEV2ZW50UGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB7ICRtb2RhbCB9ID0gZXZudFBhcmFtc1xyXG4gICAgICAgICAgWEVVdGlscy5yZW1vdmUoX2NoYXJ0TW9kYWxzLCBpZCA9PiBpZCA9PT0gJG1vZGFsLmlkKVxyXG4gICAgICAgICAgaWYgKCRtb2RhbC4kY2hhcnQpIHtcclxuICAgICAgICAgICAgJG1vZGFsLiRjaGFydC5kaXNwb3NlKClcclxuICAgICAgICAgICAgJG1vZGFsLiRjaGFydCA9IG51bGxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHpvb20gKGV2bnRQYXJhbXM6IE1vZGFsRXZlbnRQYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgJG1vZGFsIH0gPSBldm50UGFyYW1zXHJcbiAgICAgICAgICBpZiAoJG1vZGFsLiRjaGFydCkge1xyXG4gICAgICAgICAgICAkbW9kYWwuJGNoYXJ0LnJlc2l6ZSgpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBfY2hhcnRNb2RhbHMucHVzaChvcHRzLmlkKVxyXG4gICAgbW9kYWwub3BlbihvcHRzKVxyXG4gIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIGxlZ2VuZE9wdHMge1xyXG4gIGRhdGE6IEFycmF5PGFueT47XHJcbn1cclxuXHJcbmNvbnN0IG1lbnVNYXAgPSB7XHJcbiAgQ0hBUlRfQkFSX1hfQVhJUzogY3JlYXRlQ2hhcnRNb2RhbCgocGFyYW1zKSA9PiB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCBjZWxsQXJlYXMgPSAkdGFibGUuZ2V0Q2VsbEFyZWFzKClcclxuICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gY2VsbEFyZWFzWzBdXHJcbiAgICBjb25zdCB7IHBhcmFtczogY2hhcnRQYXJhbXMgPSB7fSB9ID0gbWVudVxyXG4gICAgY29uc3QgeyBjYXRlZ29yeSB9ID0gY2hhcnRQYXJhbXNcclxuICAgIGNvbnN0IGNhdGVnb3J5Q29sdW1uID0gJHRhYmxlLmdldENvbHVtbkJ5RmllbGQoY2F0ZWdvcnkgfHwgY29sc1swXS5wcm9wZXJ0eSlcclxuICAgIGNvbnN0IHNlcmllQ29sdW1ucyA9IGNvbHMuZmlsdGVyKChjb2x1bW4pID0+IGNvbHVtbi5wcm9wZXJ0eSAhPT0gY2F0ZWdvcnlDb2x1bW4ucHJvcGVydHkpXHJcbiAgICBjb25zdCBsZWdlbmRPcHRzOiBsZWdlbmRPcHRzID0ge1xyXG4gICAgICBkYXRhOiBbXVxyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VyaWVzT3B0czogYW55W10gPSBbXVxyXG4gICAgY29uc3QgeUF4aXNPcHRzID0ge1xyXG4gICAgICB0eXBlOiAnY2F0ZWdvcnknLFxyXG4gICAgICBkYXRhOiByb3dzLm1hcCgocm93KSA9PiBYRVV0aWxzLmdldChyb3csIGNhdGVnb3J5Q29sdW1uLnByb3BlcnR5KSlcclxuICAgIH1cclxuICAgIGNvbnN0IHNlcmllc0xhYmVsID0ge1xyXG4gICAgICBub3JtYWw6IHtcclxuICAgICAgICBzaG93OiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHNlcmllQ29sdW1ucy5mb3JFYWNoKChjb2x1bW4pID0+IHtcclxuICAgICAgbGVnZW5kT3B0cy5kYXRhLnB1c2goY29sdW1uLnRpdGxlKVxyXG4gICAgICBzZXJpZXNPcHRzLnB1c2goe1xyXG4gICAgICAgIG5hbWU6IGNvbHVtbi50aXRsZSxcclxuICAgICAgICB0eXBlOiAnYmFyJyxcclxuICAgICAgICBsYWJlbDogc2VyaWVzTGFiZWwsXHJcbiAgICAgICAgZGF0YTogcm93cy5tYXAoKHJvdykgPT4gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIGNvbnN0IG9wdGlvbiA9IHtcclxuICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgIHRyaWdnZXI6ICdheGlzJyxcclxuICAgICAgICBheGlzUG9pbnRlcjoge1xyXG4gICAgICAgICAgdHlwZTogJ3NoYWRvdydcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGdyaWQ6IHtcclxuICAgICAgICBsZWZ0OiAnNCUnLFxyXG4gICAgICAgIHJpZ2h0OiAnNCUnLFxyXG4gICAgICAgIGJvdHRvbTogJzMlJyxcclxuICAgICAgICBjb250YWluTGFiZWw6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgbGVnZW5kOiBsZWdlbmRPcHRzLFxyXG4gICAgICB4QXhpczoge1xyXG4gICAgICAgIHR5cGU6ICd2YWx1ZSdcclxuICAgICAgfSxcclxuICAgICAgeUF4aXM6IHlBeGlzT3B0cyxcclxuICAgICAgc2VyaWVzOiBzZXJpZXNPcHRzXHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3B0aW9uXHJcbiAgfSksXHJcbiAgQ0hBUlRfQkFSX1lfQVhJUzogY3JlYXRlQ2hhcnRNb2RhbCgocGFyYW1zKSA9PiB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCBjZWxsQXJlYXMgPSAkdGFibGUuZ2V0Q2VsbEFyZWFzKClcclxuICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gY2VsbEFyZWFzWzBdXHJcbiAgICBjb25zdCB7IHBhcmFtczogY2hhcnRQYXJhbXMgPSB7fSB9ID0gbWVudVxyXG4gICAgY29uc3QgeyBjYXRlZ29yeSB9ID0gY2hhcnRQYXJhbXNcclxuICAgIGNvbnN0IGNhdGVnb3J5Q29sdW1uID0gJHRhYmxlLmdldENvbHVtbkJ5RmllbGQoY2F0ZWdvcnkgfHwgY29sc1swXS5wcm9wZXJ0eSlcclxuICAgIGNvbnN0IHNlcmllQ29sdW1ucyA9IGNvbHMuZmlsdGVyKChjb2x1bW4pID0+IGNvbHVtbi5wcm9wZXJ0eSAhPT0gY2F0ZWdvcnlDb2x1bW4ucHJvcGVydHkpXHJcbiAgICBjb25zdCBsZWdlbmRPcHRzOiBsZWdlbmRPcHRzID0ge1xyXG4gICAgICBkYXRhOiBbXVxyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VyaWVzT3B0czogYW55W10gPSBbXVxyXG4gICAgY29uc3QgeEF4aXNPcHRzID0ge1xyXG4gICAgICB0eXBlOiAnY2F0ZWdvcnknLFxyXG4gICAgICBkYXRhOiByb3dzLm1hcCgocm93KSA9PiBYRVV0aWxzLmdldChyb3csIGNhdGVnb3J5Q29sdW1uLnByb3BlcnR5KSlcclxuICAgIH1cclxuICAgIGNvbnN0IHNlcmllc0xhYmVsID0ge1xyXG4gICAgICBub3JtYWw6IHtcclxuICAgICAgICBzaG93OiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHNlcmllQ29sdW1ucy5mb3JFYWNoKChjb2x1bW4pID0+IHtcclxuICAgICAgbGVnZW5kT3B0cy5kYXRhLnB1c2goY29sdW1uLnRpdGxlKVxyXG4gICAgICBzZXJpZXNPcHRzLnB1c2goe1xyXG4gICAgICAgIG5hbWU6IGNvbHVtbi50aXRsZSxcclxuICAgICAgICB0eXBlOiAnYmFyJyxcclxuICAgICAgICBsYWJlbDogc2VyaWVzTGFiZWwsXHJcbiAgICAgICAgZGF0YTogcm93cy5tYXAoKHJvdykgPT4gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIGNvbnN0IG9wdGlvbiA9IHtcclxuICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgIHRyaWdnZXI6ICdheGlzJyxcclxuICAgICAgICBheGlzUG9pbnRlcjoge1xyXG4gICAgICAgICAgdHlwZTogJ3NoYWRvdydcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGdyaWQ6IHtcclxuICAgICAgICBsZWZ0OiAnNCUnLFxyXG4gICAgICAgIHJpZ2h0OiAnNCUnLFxyXG4gICAgICAgIGJvdHRvbTogJzMlJyxcclxuICAgICAgICBjb250YWluTGFiZWw6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgbGVnZW5kOiBsZWdlbmRPcHRzLFxyXG4gICAgICB4QXhpczogeEF4aXNPcHRzLFxyXG4gICAgICB5QXhpczoge1xyXG4gICAgICAgIHR5cGU6ICd2YWx1ZSdcclxuICAgICAgfSxcclxuICAgICAgc2VyaWVzOiBzZXJpZXNPcHRzXHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3B0aW9uXHJcbiAgfSksXHJcbiAgQ0hBUlRfTElORTogY3JlYXRlQ2hhcnRNb2RhbCgocGFyYW1zKSA9PiB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCBjZWxsQXJlYXMgPSAkdGFibGUuZ2V0Q2VsbEFyZWFzKClcclxuICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gY2VsbEFyZWFzWzBdXHJcbiAgICBjb25zdCB7IHBhcmFtczogY2hhcnRQYXJhbXMgPSB7fSB9ID0gbWVudVxyXG4gICAgY29uc3QgeyBjYXRlZ29yeSB9ID0gY2hhcnRQYXJhbXNcclxuICAgIGNvbnN0IGNhdGVnb3J5Q29sdW1uID0gJHRhYmxlLmdldENvbHVtbkJ5RmllbGQoY2F0ZWdvcnkgfHwgY29sc1swXS5wcm9wZXJ0eSlcclxuICAgIGNvbnN0IHNlcmllQ29sdW1ucyA9IGNvbHMuZmlsdGVyKChjb2x1bW4pID0+IGNvbHVtbi5wcm9wZXJ0eSAhPT0gY2F0ZWdvcnlDb2x1bW4ucHJvcGVydHkpXHJcbiAgICBjb25zdCBsZWdlbmRPcHRzOiBsZWdlbmRPcHRzID0ge1xyXG4gICAgICBkYXRhOiBbXVxyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VyaWVzT3B0czogYW55W10gPSBbXVxyXG4gICAgY29uc3QgeEF4aXNPcHRzID0ge1xyXG4gICAgICB0eXBlOiAnY2F0ZWdvcnknLFxyXG4gICAgICBkYXRhOiByb3dzLm1hcCgocm93KSA9PiBYRVV0aWxzLmdldChyb3csIGNhdGVnb3J5Q29sdW1uLnByb3BlcnR5KSlcclxuICAgIH1cclxuICAgIHNlcmllQ29sdW1ucy5mb3JFYWNoKChjb2x1bW4pID0+IHtcclxuICAgICAgbGVnZW5kT3B0cy5kYXRhLnB1c2goY29sdW1uLnRpdGxlKVxyXG4gICAgICBzZXJpZXNPcHRzLnB1c2goe1xyXG4gICAgICAgIG5hbWU6IGNvbHVtbi50aXRsZSxcclxuICAgICAgICB0eXBlOiAnbGluZScsXHJcbiAgICAgICAgZGF0YTogcm93cy5tYXAoKHJvdykgPT4gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIGNvbnN0IG9wdGlvbiA9IHtcclxuICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgIHRyaWdnZXI6ICdheGlzJ1xyXG4gICAgICB9LFxyXG4gICAgICBsZWdlbmQ6IGxlZ2VuZE9wdHMsXHJcbiAgICAgIHRvb2xib3g6IHtcclxuICAgICAgICBmZWF0dXJlOiB7XHJcbiAgICAgICAgICBzYXZlQXNJbWFnZToge31cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGdyaWQ6IHtcclxuICAgICAgICBsZWZ0OiAnNCUnLFxyXG4gICAgICAgIHJpZ2h0OiAnNCUnLFxyXG4gICAgICAgIGJvdHRvbTogJzMlJyxcclxuICAgICAgICBjb250YWluTGFiZWw6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgeEF4aXM6IHhBeGlzT3B0cyxcclxuICAgICAgeUF4aXM6IHtcclxuICAgICAgICB0eXBlOiAndmFsdWUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlcmllczogc2VyaWVzT3B0c1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvblxyXG4gIH0pLFxyXG4gIENIQVJUX1BJRTogY3JlYXRlQ2hhcnRNb2RhbCgocGFyYW1zKSA9PiB7XHJcbiAgICBjb25zdCB7ICR0YWJsZSwgbWVudSB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCBjZWxsQXJlYXMgPSAkdGFibGUuZ2V0Q2VsbEFyZWFzKClcclxuICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gY2VsbEFyZWFzWzBdXHJcbiAgICBjb25zdCB7IHBhcmFtczogY2hhcnRQYXJhbXMgPSB7fSB9ID0gbWVudVxyXG4gICAgY29uc3QgeyBjYXRlZ29yeSB9ID0gY2hhcnRQYXJhbXNcclxuICAgIGNvbnN0IGNhdGVnb3J5Q29sdW1uID0gJHRhYmxlLmdldENvbHVtbkJ5RmllbGQoY2F0ZWdvcnkgfHwgY29sc1swXS5wcm9wZXJ0eSlcclxuICAgIGNvbnN0IHNlcmllQ29sdW1ucyA9IGNvbHMuZmlsdGVyKChjb2x1bW4pID0+IGNvbHVtbi5wcm9wZXJ0eSAhPT0gY2F0ZWdvcnlDb2x1bW4ucHJvcGVydHkpXHJcbiAgICBjb25zdCBzZXJpZUNvbHVtbiA9IHNlcmllQ29sdW1uc1swXVxyXG4gICAgY29uc3QgbGVnZW5kRGF0YSA9IHJvd3MubWFwKChyb3cpID0+IFhFVXRpbHMuZ2V0KHJvdywgY2F0ZWdvcnlDb2x1bW4ucHJvcGVydHkpKVxyXG4gICAgY29uc3Qgc2VyaWVzRGF0YTogYW55W10gPSBbXVxyXG4gICAgcm93cy5mb3JFYWNoKChyb3cpID0+IHtcclxuICAgICAgc2VyaWVzRGF0YS5wdXNoKHtcclxuICAgICAgICBuYW1lOiBYRVV0aWxzLmdldChyb3csIGNhdGVnb3J5Q29sdW1uLnByb3BlcnR5KSxcclxuICAgICAgICB2YWx1ZTogWEVVdGlscy5nZXQocm93LCBzZXJpZUNvbHVtbi5wcm9wZXJ0eSlcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBjb25zdCBvcHRpb24gPSB7XHJcbiAgICAgIHRvb2x0aXA6IHtcclxuICAgICAgICB0cmlnZ2VyOiAnaXRlbScsXHJcbiAgICAgICAgZm9ybWF0dGVyOiAne2F9IDxici8+e2J9IDoge2N9ICh7ZH0lKSdcclxuICAgICAgfSxcclxuICAgICAgbGVnZW5kOiB7XHJcbiAgICAgICAgdHlwZTogJ3Njcm9sbCcsXHJcbiAgICAgICAgb3JpZW50OiAndmVydGljYWwnLFxyXG4gICAgICAgIHJpZ2h0OiAxMCxcclxuICAgICAgICB0b3A6IDIwLFxyXG4gICAgICAgIGJvdHRvbTogMjAsXHJcbiAgICAgICAgZGF0YTogbGVnZW5kRGF0YVxyXG4gICAgICAgIC8vIHNlbGVjdGVkOiBkYXRhLnNlbGVjdGVkXHJcbiAgICAgIH0sXHJcbiAgICAgIGdyaWQ6IHtcclxuICAgICAgICBsZWZ0OiAnNCUnLFxyXG4gICAgICAgIHJpZ2h0OiAnNCUnLFxyXG4gICAgICAgIGJvdHRvbTogJzMlJyxcclxuICAgICAgICBjb250YWluTGFiZWw6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgc2VyaWVzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogc2VyaWVDb2x1bW4udGl0bGUsXHJcbiAgICAgICAgICB0eXBlOiAncGllJyxcclxuICAgICAgICAgIHJhZGl1czogJzUwJScsXHJcbiAgICAgICAgICBjZW50ZXI6IFsnNDAlJywgJzUwJSddLFxyXG4gICAgICAgICAgZGF0YTogc2VyaWVzRGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvblxyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrUHJpdmlsZWdlIChpdGVtOiBNZW51Rmlyc3RPcHRpb24gfCBNZW51Q2hpbGRPcHRpb24sIHBhcmFtczogSW50ZXJjZXB0b3JNZW51UGFyYW1zKSB7XHJcbiAgY29uc3QgeyAkdGFibGUgfSA9IHBhcmFtc1xyXG4gIGNvbnN0IHsgY29kZSwgcGFyYW1zOiBjaGFydFBhcmFtcyA9IHt9IH0gPSBpdGVtXHJcbiAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICBjYXNlICdDSEFSVF9CQVJfWF9BWElTJzpcclxuICAgIGNhc2UgJ0NIQVJUX0JBUl9ZX0FYSVMnOlxyXG4gICAgY2FzZSAnQ0hBUlRfTElORSc6IHtcclxuICAgICAgY29uc3QgY2VsbEFyZWFzID0gJHRhYmxlLmdldENlbGxBcmVhcygpXHJcbiAgICAgIGlmIChjZWxsQXJlYXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgY29uc3QgeyByb3dzLCBjb2xzIH0gPSBjZWxsQXJlYXNbMF1cclxuICAgICAgICBjb25zdCB7IGNhdGVnb3J5IH0gPSBjaGFydFBhcmFtc1xyXG4gICAgICAgIGlmIChjYXRlZ29yeSkge1xyXG4gICAgICAgICAgY29uc3Qgc2VyaWVDb2x1bW5zID0gY29scy5maWx0ZXIoKGNvbHVtbikgPT4gY29sdW1uLnByb3BlcnR5ICE9PSBjYXRlZ29yeSlcclxuICAgICAgICAgIGl0ZW0uZGlzYWJsZWQgPSAhcm93cy5sZW5ndGggfHwgc2VyaWVDb2x1bW5zLmxlbmd0aCA8IDFcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaXRlbS5kaXNhYmxlZCA9ICFyb3dzLmxlbmd0aCB8fCBjb2xzLmxlbmd0aCA8IDJcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaXRlbS5kaXNhYmxlZCA9IHRydWVcclxuICAgICAgfVxyXG4gICAgICBicmVha1xyXG4gICAgfVxyXG4gICAgY2FzZSAnQ0hBUlRfUElFJzoge1xyXG4gICAgICBjb25zdCBjZWxsQXJlYXMgPSAkdGFibGUuZ2V0Q2VsbEFyZWFzKClcclxuICAgICAgaWYgKGNlbGxBcmVhcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICBjb25zdCB7IHJvd3MsIGNvbHMgfSA9IGNlbGxBcmVhc1swXVxyXG4gICAgICAgIGNvbnN0IHsgY2F0ZWdvcnkgfSA9IGNoYXJ0UGFyYW1zXHJcbiAgICAgICAgaWYgKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgICBjb25zdCBzZXJpZUNvbHVtbnMgPSBjb2xzLmZpbHRlcigoY29sdW1uKSA9PiBjb2x1bW4ucHJvcGVydHkgIT09IGNhdGVnb3J5KVxyXG4gICAgICAgICAgaXRlbS5kaXNhYmxlZCA9ICFyb3dzLmxlbmd0aCB8fCBzZXJpZUNvbHVtbnMubGVuZ3RoICE9PSAxXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGl0ZW0uZGlzYWJsZWQgPSAhcm93cy5sZW5ndGggfHwgY29scy5sZW5ndGggIT09IDJcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaXRlbS5kaXNhYmxlZCA9IHRydWVcclxuICAgICAgfVxyXG4gICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQmVmb3JlRGVzdHJveUV2ZW50IChwYXJhbXM6IEludGVyY2VwdG9yUGFyYW1zKSB7XHJcbiAgY29uc3QgeyAkdGFibGUgfSA9IHBhcmFtc1xyXG4gIGxldCB7ICR2eGUsIF9jaGFydE1vZGFscyB9ID0gJHRhYmxlXHJcbiAgaWYgKF9jaGFydE1vZGFscykge1xyXG4gICAgY29uc3QgeyBtb2RhbCB9ID0gJHZ4ZVxyXG4gICAgX2NoYXJ0TW9kYWxzLnNsaWNlKDApLnJldmVyc2UoKS5mb3JFYWNoKG1vZGFsLmNsb3NlKVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJpdmlsZWdlRXZlbnQgKHBhcmFtczogSW50ZXJjZXB0b3JNZW51UGFyYW1zKSB7XHJcbiAgcGFyYW1zLm9wdGlvbnMuZm9yRWFjaCgobGlzdCkgPT4ge1xyXG4gICAgbGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGNoZWNrUHJpdmlsZWdlKGl0ZW0sIHBhcmFtcylcclxuICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcclxuICAgICAgICBpdGVtLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcbiAgICAgICAgICBjaGVja1ByaXZpbGVnZShjaGlsZCwgcGFyYW1zKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIOWfuuS6jiB2eGUtdGFibGUgcHJvIOeahOWbvuihqOa4suafk+aPkuS7tlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZYRVRhYmxlUGx1Z2luQ2hhcnRzID0ge1xyXG4gIGluc3RhbGwgICh4dGFibGU6IHR5cGVvZiBWWEVUYWJsZSkge1xyXG4gICAgY29uc3QgeyBpbnRlcmNlcHRvciwgbWVudXMgfSA9IHh0YWJsZVxyXG4gICAgaW50ZXJjZXB0b3IuYWRkKCdiZWZvcmVEZXN0cm95JywgaGFuZGxlQmVmb3JlRGVzdHJveUV2ZW50KVxyXG4gICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5zaG93TWVudScsIGhhbmRsZVByaXZpbGVnZUV2ZW50KVxyXG4gICAgbWVudXMubWl4aW4obWVudU1hcClcclxuICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUpIHtcclxuICB3aW5kb3cuVlhFVGFibGUudXNlKFZYRVRhYmxlUGx1Z2luQ2hhcnRzKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpbkNoYXJ0c1xyXG4iXX0=
