"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginCharts = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

var echarts = _interopRequireWildcard(require("echarts/lib/echarts"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

/* eslint-enable no-unused-vars */
var _vxetable;

function createChartModal(getOptions) {
  return function (params) {
    var menu = params.menu;
    var $table = params.$table;
    var chartModals = $table.chartModals;

    if (!chartModals) {
      chartModals = $table.chartModals = [];
    }

    var opts = {
      id: _xeUtils["default"].uniqueId(),
      resize: true,
      mask: false,
      lockView: false,
      showFooter: false,
      width: 600,
      height: 400,
      title: menu.name,
      slots: {
        "default": function _default(params, h) {
          return [h('div', {
            "class": 'vxe-chart--wrapper'
          }, [h('div', {
            "class": 'vxe-chart--panel'
          })])];
        }
      },
      events: {
        show: function show(_ref) {
          var $modal = _ref.$modal;
          var $chart = echarts.init($modal.$el.querySelector('.vxe-chart--wrapper'));
          $chart.setOption(getOptions(params));
          $modal.$chart = $chart;
        },
        hide: function hide(_ref2) {
          var $modal = _ref2.$modal;

          _xeUtils["default"].remove(chartModals, function (id) {
            return id === $modal.id;
          });

          $modal.$chart.dispose();
          $modal.$chart = null;
        },
        zoom: function zoom(_ref3) {
          var $modal = _ref3.$modal;
          $modal.$chart.resize();
        }
      }
    };
    chartModals.push(opts.id);

    _vxetable.modal.open(opts);
  };
}

var menuMap = {
  CHART_BAR_X_AXIS: createChartModal(function (params) {
    var $table = params.$table;
    var menu = params.menu;

    var _$table$getSelectedRa = $table.getSelectedRanges(),
        rows = _$table$getSelectedRa.rows,
        columns = _$table$getSelectedRa.columns;

    var _menu$params = menu.params,
        chartParams = _menu$params === void 0 ? {} : _menu$params;
    var category = chartParams.category;
    var categoryColumn = $table.getColumnByField(category || columns[0].property);
    var serieColumns = columns.filter(function (column) {
      return column.property !== categoryColumn.property;
    });
    var legendOpts = {
      data: []
    };
    var seriesOpts = [];
    var xAxisOpts = {
      type: 'category',
      data: rows.map(function (row) {
        return _xeUtils["default"].get(row, categoryColumn.property);
      })
    };
    serieColumns.forEach(function (column) {
      legendOpts.data.push(column.title);
      seriesOpts.push({
        name: column.title,
        type: 'bar',
        data: rows.map(function (row) {
          return _xeUtils["default"].get(row, column.property);
        })
      });
    });
    var option = {
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'shadow'
        }
      },
      legend: legendOpts,
      xAxis: xAxisOpts,
      yAxis: {
        type: 'value'
      },
      series: seriesOpts
    };
    return option;
  }),
  CHART_BAR_Y_AXIS: createChartModal(function (params) {
    var $table = params.$table;
    var menu = params.menu;

    var _$table$getSelectedRa2 = $table.getSelectedRanges(),
        rows = _$table$getSelectedRa2.rows,
        columns = _$table$getSelectedRa2.columns;

    var _menu$params2 = menu.params,
        chartParams = _menu$params2 === void 0 ? {} : _menu$params2;
    var category = chartParams.category;
    var categoryColumn = $table.getColumnByField(category || columns[0].property);
    var serieColumns = columns.filter(function (column) {
      return column.property !== categoryColumn.property;
    });
    var legendOpts = {
      data: []
    };
    var seriesOpts = [];
    var xAxisOpts = {
      type: 'category',
      data: rows.map(function (row) {
        return _xeUtils["default"].get(row, categoryColumn.property);
      })
    };
    serieColumns.forEach(function (column) {
      legendOpts.data.push(column.title);
      seriesOpts.push({
        name: column.title,
        type: 'bar',
        data: rows.map(function (row) {
          return _xeUtils["default"].get(row, column.property);
        })
      });
    });
    var option = {
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'shadow'
        }
      },
      legend: legendOpts,
      xAxis: xAxisOpts,
      yAxis: {
        type: 'value'
      },
      series: seriesOpts
    };
    return option;
  }),
  CHART_LINE: createChartModal(function (params) {
    var $table = params.$table;
    var menu = params.menu;

    var _$table$getSelectedRa3 = $table.getSelectedRanges(),
        rows = _$table$getSelectedRa3.rows,
        columns = _$table$getSelectedRa3.columns;

    var _menu$params3 = menu.params,
        chartParams = _menu$params3 === void 0 ? {} : _menu$params3;
    var category = chartParams.category;
    var categoryColumn = $table.getColumnByField(category || columns[0].property);
    var serieColumns = columns.filter(function (column) {
      return column.property !== categoryColumn.property;
    });
    var legendOpts = {
      data: []
    };
    var seriesOpts = [];
    var xAxisOpts = {
      type: 'category',
      data: rows.map(function (row) {
        return _xeUtils["default"].get(row, categoryColumn.property);
      })
    };
    serieColumns.forEach(function (column) {
      legendOpts.data.push(column.title);
      seriesOpts.push({
        name: column.title,
        type: 'line',
        data: rows.map(function (row) {
          return _xeUtils["default"].get(row, column.property);
        })
      });
    });
    var option = {
      tooltip: {
        trigger: 'axis'
      },
      legend: legendOpts,
      toolbox: {
        feature: {
          saveAsImage: {}
        }
      },
      xAxis: xAxisOpts,
      yAxis: {
        type: 'value'
      },
      series: seriesOpts
    };
    return option;
  }),
  CHART_PIE: createChartModal(function (params) {
    var $table = params.$table;
    var menu = params.menu;

    var _$table$getSelectedRa4 = $table.getSelectedRanges(),
        rows = _$table$getSelectedRa4.rows,
        columns = _$table$getSelectedRa4.columns;

    var _menu$params4 = menu.params,
        chartParams = _menu$params4 === void 0 ? {} : _menu$params4;
    var category = chartParams.category;
    var categoryColumn = $table.getColumnByField(category || columns[0].property);
    var serieColumns = columns.filter(function (column) {
      return column.property !== categoryColumn.property;
    });
    var serieColumn = serieColumns[0];
    var legendData = rows.map(function (row) {
      return _xeUtils["default"].get(row, categoryColumn.property);
    });
    var seriesData = [];
    rows.forEach(function (row) {
      seriesData.push({
        name: _xeUtils["default"].get(row, categoryColumn.property),
        value: _xeUtils["default"].get(row, serieColumn.property)
      });
    });
    var option = {
      tooltip: {
        trigger: 'item',
        formatter: '{a} <br/>{b} : {c} ({d}%)'
      },
      legend: {
        type: 'scroll',
        orient: 'vertical',
        right: 10,
        top: 20,
        bottom: 20,
        data: legendData // selected: data.selected

      },
      series: [{
        name: serieColumn.title,
        type: 'pie',
        radius: '50%',
        center: ['40%', '50%'],
        data: seriesData
      }]
    };
    return option;
  })
};

function checkPrivilege(item, params) {
  var $table = params.$table;
  var code = item.code,
      _item$params = item.params,
      chartParams = _item$params === void 0 ? {} : _item$params;

  switch (code) {
    case 'CHART_BAR_X_AXIS':
    case 'CHART_BAR_Y_AXIS':
    case 'CHART_LINE':
      {
        var _$table$getSelectedRa5 = $table.getSelectedRanges(),
            rows = _$table$getSelectedRa5.rows,
            columns = _$table$getSelectedRa5.columns;

        var category = chartParams.category;

        if (category) {
          var serieColumns = columns.filter(function (column) {
            return column.property !== category;
          });
          item.disabled = !rows.length || serieColumns.length < 1;
        } else {
          item.disabled = !rows.length || columns.length < 2;
        }
      }
      break;

    case 'CHART_PIE':
      {
        var _$table$getSelectedRa6 = $table.getSelectedRanges(),
            _rows = _$table$getSelectedRa6.rows,
            _columns = _$table$getSelectedRa6.columns;

        var _category = chartParams.category;

        if (_category) {
          var _serieColumns = _columns.filter(function (column) {
            return column.property !== _category;
          });

          item.disabled = !_rows.length || _serieColumns.length !== 1;
        } else {
          item.disabled = !_rows.length || _columns.length !== 2;
        }
      }
      break;
  }
}

function handleBeforeDestroyEvent(params) {
  var $table = params.$table;
  var chartModals = $table.chartModals;

  if (chartModals) {
    chartModals.slice(0).forEach(function (id) {
      return _vxetable.modal.close(id);
    });
  }
}

function handlePrivilegeEvent(params) {
  params.options.forEach(function (list) {
    list.forEach(function (item) {
      checkPrivilege(item, params);

      if (item.children) {
        item.children.forEach(function (child) {
          checkPrivilege(child, params);
        });
      }
    });
  });
}
/**
 * 基于 vxe-table 表格的图表渲染插件
 */


var VXETablePluginCharts = {
  install: function install(xtable) {
    var v = xtable.v,
        interceptor = xtable.interceptor,
        menus = xtable.menus;

    if (v !== 'v2') {
      throw new Error('[vxe-table-plugin-charts] V2 version is required.');
    }

    _vxetable = xtable;
    interceptor.add('beforeDestroy', handleBeforeDestroyEvent);
    interceptor.add('event.showMenu', handlePrivilegeEvent);
    menus.mixin(menuMap);
  }
};
exports.VXETablePluginCharts = VXETablePluginCharts;

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginCharts);
}

var _default2 = VXETablePluginCharts;
exports["default"] = _default2;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbIl92eGV0YWJsZSIsImNyZWF0ZUNoYXJ0TW9kYWwiLCJnZXRPcHRpb25zIiwicGFyYW1zIiwibWVudSIsIiR0YWJsZSIsImNoYXJ0TW9kYWxzIiwib3B0cyIsImlkIiwiWEVVdGlscyIsInVuaXF1ZUlkIiwicmVzaXplIiwibWFzayIsImxvY2tWaWV3Iiwic2hvd0Zvb3RlciIsIndpZHRoIiwiaGVpZ2h0IiwidGl0bGUiLCJuYW1lIiwic2xvdHMiLCJoIiwiZXZlbnRzIiwic2hvdyIsIiRtb2RhbCIsIiRjaGFydCIsImVjaGFydHMiLCJpbml0IiwiJGVsIiwicXVlcnlTZWxlY3RvciIsInNldE9wdGlvbiIsImhpZGUiLCJyZW1vdmUiLCJkaXNwb3NlIiwiem9vbSIsInB1c2giLCJtb2RhbCIsIm9wZW4iLCJtZW51TWFwIiwiQ0hBUlRfQkFSX1hfQVhJUyIsImdldFNlbGVjdGVkUmFuZ2VzIiwicm93cyIsImNvbHVtbnMiLCJjaGFydFBhcmFtcyIsImNhdGVnb3J5IiwiY2F0ZWdvcnlDb2x1bW4iLCJnZXRDb2x1bW5CeUZpZWxkIiwicHJvcGVydHkiLCJzZXJpZUNvbHVtbnMiLCJmaWx0ZXIiLCJjb2x1bW4iLCJsZWdlbmRPcHRzIiwiZGF0YSIsInNlcmllc09wdHMiLCJ4QXhpc09wdHMiLCJ0eXBlIiwibWFwIiwicm93IiwiZ2V0IiwiZm9yRWFjaCIsIm9wdGlvbiIsInRvb2x0aXAiLCJ0cmlnZ2VyIiwiYXhpc1BvaW50ZXIiLCJsZWdlbmQiLCJ4QXhpcyIsInlBeGlzIiwic2VyaWVzIiwiQ0hBUlRfQkFSX1lfQVhJUyIsIkNIQVJUX0xJTkUiLCJ0b29sYm94IiwiZmVhdHVyZSIsInNhdmVBc0ltYWdlIiwiQ0hBUlRfUElFIiwic2VyaWVDb2x1bW4iLCJsZWdlbmREYXRhIiwic2VyaWVzRGF0YSIsInZhbHVlIiwiZm9ybWF0dGVyIiwib3JpZW50IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJyYWRpdXMiLCJjZW50ZXIiLCJjaGVja1ByaXZpbGVnZSIsIml0ZW0iLCJjb2RlIiwiZGlzYWJsZWQiLCJsZW5ndGgiLCJoYW5kbGVCZWZvcmVEZXN0cm95RXZlbnQiLCJzbGljZSIsImNsb3NlIiwiaGFuZGxlUHJpdmlsZWdlRXZlbnQiLCJvcHRpb25zIiwibGlzdCIsImNoaWxkcmVuIiwiY2hpbGQiLCJWWEVUYWJsZVBsdWdpbkNoYXJ0cyIsImluc3RhbGwiLCJ4dGFibGUiLCJ2IiwiaW50ZXJjZXB0b3IiLCJtZW51cyIsIkVycm9yIiwiYWRkIiwibWl4aW4iLCJ3aW5kb3ciLCJWWEVUYWJsZSIsInVzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRUE7O0FBV0E7Ozs7Ozs7O0FBQ0E7QUFFQSxJQUFJQSxTQUFKOztBQUVBLFNBQVNDLGdCQUFULENBQTJCQyxVQUEzQixFQUF5RjtBQUN2RixTQUFPLFVBQVVDLE1BQVYsRUFBZ0M7QUFBQSxRQUM3QkMsSUFENkIsR0FDcEJELE1BRG9CLENBQzdCQyxJQUQ2QjtBQUVyQyxRQUFNQyxNQUFNLEdBQVFGLE1BQU0sQ0FBQ0UsTUFBM0I7QUFDQSxRQUFJQyxXQUFXLEdBQWFELE1BQU0sQ0FBQ0MsV0FBbkM7O0FBQ0EsUUFBSSxDQUFDQSxXQUFMLEVBQWtCO0FBQ2hCQSxNQUFBQSxXQUFXLEdBQUdELE1BQU0sQ0FBQ0MsV0FBUCxHQUFxQixFQUFuQztBQUNEOztBQUNELFFBQU1DLElBQUksR0FBRztBQUNYQyxNQUFBQSxFQUFFLEVBQUVDLG9CQUFRQyxRQUFSLEVBRE87QUFFWEMsTUFBQUEsTUFBTSxFQUFFLElBRkc7QUFHWEMsTUFBQUEsSUFBSSxFQUFFLEtBSEs7QUFJWEMsTUFBQUEsUUFBUSxFQUFFLEtBSkM7QUFLWEMsTUFBQUEsVUFBVSxFQUFFLEtBTEQ7QUFNWEMsTUFBQUEsS0FBSyxFQUFFLEdBTkk7QUFPWEMsTUFBQUEsTUFBTSxFQUFFLEdBUEc7QUFRWEMsTUFBQUEsS0FBSyxFQUFFYixJQUFJLENBQUNjLElBUkQ7QUFTWEMsTUFBQUEsS0FBSyxFQUFFO0FBQUEscUNBQ0lo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LFFBQUwsQ0FBY3JDLE9BQWQsQ0FBc0IsVUFBQ3NDLEtBQUQsRUFBVTtBQUM5QlosVUFBQUEsY0FBYyxDQUFDWSxLQUFELEVBQVE3RixNQUFSLENBQWQ7QUFDRCxTQUZEO0FBR0Q7QUFDRixLQVBEO0FBUUQsR0FURDtBQVVEO0FBRUQ7Ozs7O0FBR08sSUFBTThGLG9CQUFvQixHQUFHO0FBQ2xDQyxFQUFBQSxPQURrQyxtQkFDeEJDLE1BRHdCLEVBQ0Q7QUFBQSxRQUN2QkMsQ0FEdUIsR0FDR0QsTUFESCxDQUN2QkMsQ0FEdUI7QUFBQSxRQUNwQkMsV0FEb0IsR0FDR0YsTUFESCxDQUNwQkUsV0FEb0I7QUFBQSxRQUNQQyxLQURPLEdBQ0dILE1BREgsQ0FDUEcsS0FETzs7QUFFL0IsUUFBSUYsQ0FBQyxLQUFLLElBQVYsRUFBZ0I7QUFDZCxZQUFNLElBQUlHLEtBQUosQ0FBVSxtREFBVixDQUFOO0FBQ0Q7O0FBQ0R2RyxJQUFBQSxTQUFTLEdBQUdtRyxNQUFaO0FBQ0FFLElBQUFBLFdBQVcsQ0FBQ0csR0FBWixDQUFnQixlQUFoQixFQUFpQ2Ysd0JBQWpDO0FBQ0FZLElBQUFBLFdBQVcsQ0FBQ0csR0FBWixDQUFnQixnQkFBaEIsRUFBa0NaLG9CQUFsQztBQUNBVSxJQUFBQSxLQUFLLENBQUNHLEtBQU4sQ0FBWXBFLE9BQVo7QUFDRDtBQVZpQyxDQUE3Qjs7O0FBYVAsSUFBSSxPQUFPcUUsTUFBUCxLQUFrQixXQUFsQixJQUFpQ0EsTUFBTSxDQUFDQyxRQUE1QyxFQUFzRDtBQUNwREQsRUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxHQUFoQixDQUFvQlgsb0JBQXBCO0FBQ0Q7O2dCQUVjQSxvQiIsImZpbGUiOiJpbmRleC5jb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG5pbXBvcnQgeyBDcmVhdGVFbGVtZW50IH0gZnJvbSAndnVlJ1xyXG5pbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscy9tZXRob2RzL3hlLXV0aWxzJ1xyXG5pbXBvcnQge1xyXG4gIFZYRVRhYmxlLFxyXG4gIEludGVyY2VwdG9yUGFyYW1zLFxyXG4gIEludGVyY2VwdG9yTWVudVBhcmFtcyxcclxuICBNZW51TGlua1BhcmFtcyxcclxuICBNZW51Rmlyc3RPcHRpb24sXHJcbiAgTWVudUNoaWxkT3B0aW9uLFxyXG4gIENvbHVtbkNvbmZpZyxcclxuICBNb2RhbERlZmF1bHRTbG90UGFyYW1zXHJcbn0gZnJvbSAndnhlLXRhYmxlL2xpYi92eGUtdGFibGUnXHJcbmltcG9ydCAqIGFzIGVjaGFydHMgZnJvbSAnZWNoYXJ0cy9saWIvZWNoYXJ0cydcclxuLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG5cclxubGV0IF92eGV0YWJsZTogdHlwZW9mIFZYRVRhYmxlXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDaGFydE1vZGFsIChnZXRPcHRpb25zOiAocGFyYW1zOiBNZW51TGlua1BhcmFtcykgPT4geyBba2V0OiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocGFyYW1zOiBNZW51TGlua1BhcmFtcykge1xyXG4gICAgY29uc3QgeyBtZW51IH0gPSBwYXJhbXNcclxuICAgIGNvbnN0ICR0YWJsZTogYW55ID0gcGFyYW1zLiR0YWJsZVxyXG4gICAgbGV0IGNoYXJ0TW9kYWxzOiBzdHJpbmdbXSA9ICR0YWJsZS5jaGFydE1vZGFsc1xyXG4gICAgaWYgKCFjaGFydE1vZGFscykge1xyXG4gICAgICBjaGFydE1vZGFscyA9ICR0YWJsZS5jaGFydE1vZGFscyA9IFtdXHJcbiAgICB9XHJcbiAgICBjb25zdCBvcHRzID0ge1xyXG4gICAgICBpZDogWEVVdGlscy51bmlxdWVJZCgpLFxyXG4gICAgICByZXNpemU6IHRydWUsXHJcbiAgICAgIG1hc2s6IGZhbHNlLFxyXG4gICAgICBsb2NrVmlldzogZmFsc2UsXHJcbiAgICAgIHNob3dGb290ZXI6IGZhbHNlLFxyXG4gICAgICB3aWR0aDogNjAwLFxyXG4gICAgICBoZWlnaHQ6IDQwMCxcclxuICAgICAgdGl0bGU6IG1lbnUubmFtZSxcclxuICAgICAgc2xvdHM6IHtcclxuICAgICAgICBkZWZhdWx0IChwYXJhbXM6IE1vZGFsRGVmYXVsdFNsb3RQYXJhbXMsIGg6IENyZWF0ZUVsZW1lbnQpIHtcclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcclxuICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS1jaGFydC0td3JhcHBlcidcclxuICAgICAgICAgICAgfSwgW1xyXG4gICAgICAgICAgICAgIGgoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLWNoYXJ0LS1wYW5lbCdcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdKVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgc2hvdyAoeyAkbW9kYWwgfTogYW55KSB7XHJcbiAgICAgICAgICBjb25zdCAkY2hhcnQgPSBlY2hhcnRzLmluaXQoJG1vZGFsLiRlbC5xdWVyeVNlbGVjdG9yKCcudnhlLWNoYXJ0LS13cmFwcGVyJykpXHJcbiAgICAgICAgICAkY2hhcnQuc2V0T3B0aW9uKGdldE9wdGlvbnMocGFyYW1zKSlcclxuICAgICAgICAgICRtb2RhbC4kY2hhcnQgPSAkY2hhcnRcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhpZGUgKHsgJG1vZGFsIH06IGFueSkge1xyXG4gICAgICAgICAgWEVVdGlscy5yZW1vdmUoY2hhcnRNb2RhbHMsIGlkID0+IGlkID09PSAkbW9kYWwuaWQpXHJcbiAgICAgICAgICAkbW9kYWwuJGNoYXJ0LmRpc3Bvc2UoKVxyXG4gICAgICAgICAgJG1vZGFsLiRjaGFydCA9IG51bGxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHpvb20gKHsgJG1vZGFsIH06IGFueSkge1xyXG4gICAgICAgICAgJG1vZGFsLiRjaGFydC5yZXNpemUoKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2hhcnRNb2RhbHMucHVzaChvcHRzLmlkKVxyXG4gICAgX3Z4ZXRhYmxlLm1vZGFsLm9wZW4ob3B0cylcclxuICB9XHJcbn1cclxuXHJcbmludGVyZmFjZSBsZWdlbmRPcHRzIHtcclxuICBkYXRhOiBBcnJheTxhbnk+O1xyXG59XHJcblxyXG5jb25zdCBtZW51TWFwID0ge1xyXG4gIENIQVJUX0JBUl9YX0FYSVM6IGNyZWF0ZUNoYXJ0TW9kYWwoKHBhcmFtcykgPT4ge1xyXG4gICAgY29uc3QgJHRhYmxlOiBhbnkgPSBwYXJhbXMuJHRhYmxlXHJcbiAgICBjb25zdCB7IG1lbnUgfSA9IHBhcmFtc1xyXG4gICAgY29uc3QgeyByb3dzLCBjb2x1bW5zIH06IHsgcm93czogYW55W10sIGNvbHVtbnM6IENvbHVtbkNvbmZpZ1tdIH0gPSAkdGFibGUuZ2V0U2VsZWN0ZWRSYW5nZXMoKVxyXG4gICAgY29uc3QgeyBwYXJhbXM6IGNoYXJ0UGFyYW1zID0ge30gfSA9IG1lbnVcclxuICAgIGNvbnN0IHsgY2F0ZWdvcnkgfSA9IGNoYXJ0UGFyYW1zXHJcbiAgICBjb25zdCBjYXRlZ29yeUNvbHVtbiA9ICR0YWJsZS5nZXRDb2x1bW5CeUZpZWxkKGNhdGVnb3J5IHx8IGNvbHVtbnNbMF0ucHJvcGVydHkpXHJcbiAgICBjb25zdCBzZXJpZUNvbHVtbnMgPSBjb2x1bW5zLmZpbHRlcigoY29sdW1uKSA9PiBjb2x1bW4ucHJvcGVydHkgIT09IGNhdGVnb3J5Q29sdW1uLnByb3BlcnR5KVxyXG4gICAgY29uc3QgbGVnZW5kT3B0czogbGVnZW5kT3B0cyA9IHtcclxuICAgICAgZGF0YTogW11cclxuICAgIH1cclxuICAgIGNvbnN0IHNlcmllc09wdHM6IGFueVtdID0gW11cclxuICAgIGNvbnN0IHhBeGlzT3B0cyA9IHtcclxuICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcclxuICAgICAgZGF0YTogcm93cy5tYXAoKHJvdykgPT4gWEVVdGlscy5nZXQocm93LCBjYXRlZ29yeUNvbHVtbi5wcm9wZXJ0eSkpXHJcbiAgICB9XHJcbiAgICBzZXJpZUNvbHVtbnMuZm9yRWFjaCgoY29sdW1uKSA9PiB7XHJcbiAgICAgIGxlZ2VuZE9wdHMuZGF0YS5wdXNoKGNvbHVtbi50aXRsZSlcclxuICAgICAgc2VyaWVzT3B0cy5wdXNoKHtcclxuICAgICAgICBuYW1lOiBjb2x1bW4udGl0bGUsXHJcbiAgICAgICAgdHlwZTogJ2JhcicsXHJcbiAgICAgICAgZGF0YTogcm93cy5tYXAoKHJvdykgPT4gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIGNvbnN0IG9wdGlvbiA9IHtcclxuICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgIHRyaWdnZXI6ICdheGlzJyxcclxuICAgICAgICBheGlzUG9pbnRlcjoge1xyXG4gICAgICAgICAgdHlwZTogJ3NoYWRvdydcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGxlZ2VuZDogbGVnZW5kT3B0cyxcclxuICAgICAgeEF4aXM6IHhBeGlzT3B0cyxcclxuICAgICAgeUF4aXM6IHtcclxuICAgICAgICB0eXBlOiAndmFsdWUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlcmllczogc2VyaWVzT3B0c1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvblxyXG4gIH0pLFxyXG4gIENIQVJUX0JBUl9ZX0FYSVM6IGNyZWF0ZUNoYXJ0TW9kYWwoKHBhcmFtcykgPT4ge1xyXG4gICAgY29uc3QgJHRhYmxlOiBhbnkgPSBwYXJhbXMuJHRhYmxlXHJcbiAgICBjb25zdCB7IG1lbnUgfSA9IHBhcmFtc1xyXG4gICAgY29uc3QgeyByb3dzLCBjb2x1bW5zIH06IHsgcm93czogYW55W10sIGNvbHVtbnM6IENvbHVtbkNvbmZpZ1tdIH0gPSAkdGFibGUuZ2V0U2VsZWN0ZWRSYW5nZXMoKVxyXG4gICAgY29uc3QgeyBwYXJhbXM6IGNoYXJ0UGFyYW1zID0ge30gfSA9IG1lbnVcclxuICAgIGNvbnN0IHsgY2F0ZWdvcnkgfSA9IGNoYXJ0UGFyYW1zXHJcbiAgICBjb25zdCBjYXRlZ29yeUNvbHVtbiA9ICR0YWJsZS5nZXRDb2x1bW5CeUZpZWxkKGNhdGVnb3J5IHx8IGNvbHVtbnNbMF0ucHJvcGVydHkpXHJcbiAgICBjb25zdCBzZXJpZUNvbHVtbnMgPSBjb2x1bW5zLmZpbHRlcigoY29sdW1uKSA9PiBjb2x1bW4ucHJvcGVydHkgIT09IGNhdGVnb3J5Q29sdW1uLnByb3BlcnR5KVxyXG4gICAgY29uc3QgbGVnZW5kT3B0czogbGVnZW5kT3B0cyA9IHtcclxuICAgICAgZGF0YTogW11cclxuICAgIH1cclxuICAgIGNvbnN0IHNlcmllc09wdHM6IGFueVtdID0gW11cclxuICAgIGNvbnN0IHhBeGlzT3B0cyA9IHtcclxuICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcclxuICAgICAgZGF0YTogcm93cy5tYXAoKHJvdykgPT4gWEVVdGlscy5nZXQocm93LCBjYXRlZ29yeUNvbHVtbi5wcm9wZXJ0eSkpXHJcbiAgICB9XHJcbiAgICBzZXJpZUNvbHVtbnMuZm9yRWFjaCgoY29sdW1uKSA9PiB7XHJcbiAgICAgIGxlZ2VuZE9wdHMuZGF0YS5wdXNoKGNvbHVtbi50aXRsZSlcclxuICAgICAgc2VyaWVzT3B0cy5wdXNoKHtcclxuICAgICAgICBuYW1lOiBjb2x1bW4udGl0bGUsXHJcbiAgICAgICAgdHlwZTogJ2JhcicsXHJcbiAgICAgICAgZGF0YTogcm93cy5tYXAoKHJvdykgPT4gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIGNvbnN0IG9wdGlvbiA9IHtcclxuICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgIHRyaWdnZXI6ICdheGlzJyxcclxuICAgICAgICBheGlzUG9pbnRlcjoge1xyXG4gICAgICAgICAgdHlwZTogJ3NoYWRvdydcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGxlZ2VuZDogbGVnZW5kT3B0cyxcclxuICAgICAgeEF4aXM6IHhBeGlzT3B0cyxcclxuICAgICAgeUF4aXM6IHtcclxuICAgICAgICB0eXBlOiAndmFsdWUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlcmllczogc2VyaWVzT3B0c1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvblxyXG4gIH0pLFxyXG4gIENIQVJUX0xJTkU6IGNyZWF0ZUNoYXJ0TW9kYWwoKHBhcmFtcykgPT4ge1xyXG4gICAgY29uc3QgJHRhYmxlOiBhbnkgPSBwYXJhbXMuJHRhYmxlXHJcbiAgICBjb25zdCB7IG1lbnUgfSA9IHBhcmFtc1xyXG4gICAgY29uc3QgeyByb3dzLCBjb2x1bW5zIH06IHsgcm93czogYW55W10sIGNvbHVtbnM6IENvbHVtbkNvbmZpZ1tdIH0gPSAkdGFibGUuZ2V0U2VsZWN0ZWRSYW5nZXMoKVxyXG4gICAgY29uc3QgeyBwYXJhbXM6IGNoYXJ0UGFyYW1zID0ge30gfSA9IG1lbnVcclxuICAgIGNvbnN0IHsgY2F0ZWdvcnkgfSA9IGNoYXJ0UGFyYW1zXHJcbiAgICBjb25zdCBjYXRlZ29yeUNvbHVtbiA9ICR0YWJsZS5nZXRDb2x1bW5CeUZpZWxkKGNhdGVnb3J5IHx8IGNvbHVtbnNbMF0ucHJvcGVydHkpXHJcbiAgICBjb25zdCBzZXJpZUNvbHVtbnMgPSBjb2x1bW5zLmZpbHRlcigoY29sdW1uKSA9PiBjb2x1bW4ucHJvcGVydHkgIT09IGNhdGVnb3J5Q29sdW1uLnByb3BlcnR5KVxyXG4gICAgY29uc3QgbGVnZW5kT3B0czogbGVnZW5kT3B0cyA9IHtcclxuICAgICAgZGF0YTogW11cclxuICAgIH1cclxuICAgIGNvbnN0IHNlcmllc09wdHM6IGFueVtdID0gW11cclxuICAgIGNvbnN0IHhBeGlzT3B0cyA9IHtcclxuICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcclxuICAgICAgZGF0YTogcm93cy5tYXAoKHJvdykgPT4gWEVVdGlscy5nZXQocm93LCBjYXRlZ29yeUNvbHVtbi5wcm9wZXJ0eSkpXHJcbiAgICB9XHJcbiAgICBzZXJpZUNvbHVtbnMuZm9yRWFjaCgoY29sdW1uKSA9PiB7XHJcbiAgICAgIGxlZ2VuZE9wdHMuZGF0YS5wdXNoKGNvbHVtbi50aXRsZSlcclxuICAgICAgc2VyaWVzT3B0cy5wdXNoKHtcclxuICAgICAgICBuYW1lOiBjb2x1bW4udGl0bGUsXHJcbiAgICAgICAgdHlwZTogJ2xpbmUnLFxyXG4gICAgICAgIGRhdGE6IHJvd3MubWFwKChyb3cpID0+IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KSlcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBjb25zdCBvcHRpb24gPSB7XHJcbiAgICAgIHRvb2x0aXA6IHtcclxuICAgICAgICB0cmlnZ2VyOiAnYXhpcydcclxuICAgICAgfSxcclxuICAgICAgbGVnZW5kOiBsZWdlbmRPcHRzLFxyXG4gICAgICB0b29sYm94OiB7XHJcbiAgICAgICAgZmVhdHVyZToge1xyXG4gICAgICAgICAgc2F2ZUFzSW1hZ2U6IHt9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB4QXhpczogeEF4aXNPcHRzLFxyXG4gICAgICB5QXhpczoge1xyXG4gICAgICAgIHR5cGU6ICd2YWx1ZSdcclxuICAgICAgfSxcclxuICAgICAgc2VyaWVzOiBzZXJpZXNPcHRzXHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3B0aW9uXHJcbiAgfSksXHJcbiAgQ0hBUlRfUElFOiBjcmVhdGVDaGFydE1vZGFsKChwYXJhbXMpID0+IHtcclxuICAgIGNvbnN0ICR0YWJsZTogYW55ID0gcGFyYW1zLiR0YWJsZVxyXG4gICAgY29uc3QgeyBtZW51IH0gPSBwYXJhbXNcclxuICAgIGNvbnN0IHsgcm93cywgY29sdW1ucyB9OiB7IHJvd3M6IGFueVtdLCBjb2x1bW5zOiBDb2x1bW5Db25maWdbXSB9ID0gJHRhYmxlLmdldFNlbGVjdGVkUmFuZ2VzKClcclxuICAgIGNvbnN0IHsgcGFyYW1zOiBjaGFydFBhcmFtcyA9IHt9IH0gPSBtZW51XHJcbiAgICBjb25zdCB7IGNhdGVnb3J5IH0gPSBjaGFydFBhcmFtc1xyXG4gICAgY29uc3QgY2F0ZWdvcnlDb2x1bW4gPSAkdGFibGUuZ2V0Q29sdW1uQnlGaWVsZChjYXRlZ29yeSB8fCBjb2x1bW5zWzBdLnByb3BlcnR5KVxyXG4gICAgY29uc3Qgc2VyaWVDb2x1bW5zID0gY29sdW1ucy5maWx0ZXIoKGNvbHVtbikgPT4gY29sdW1uLnByb3BlcnR5ICE9PSBjYXRlZ29yeUNvbHVtbi5wcm9wZXJ0eSlcclxuICAgIGNvbnN0IHNlcmllQ29sdW1uID0gc2VyaWVDb2x1bW5zWzBdXHJcbiAgICBjb25zdCBsZWdlbmREYXRhID0gcm93cy5tYXAoKHJvdykgPT4gWEVVdGlscy5nZXQocm93LCBjYXRlZ29yeUNvbHVtbi5wcm9wZXJ0eSkpXHJcbiAgICBjb25zdCBzZXJpZXNEYXRhOiBhbnlbXSA9IFtdXHJcbiAgICByb3dzLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgICBzZXJpZXNEYXRhLnB1c2goe1xyXG4gICAgICAgIG5hbWU6IFhFVXRpbHMuZ2V0KHJvdywgY2F0ZWdvcnlDb2x1bW4ucHJvcGVydHkpLFxyXG4gICAgICAgIHZhbHVlOiBYRVV0aWxzLmdldChyb3csIHNlcmllQ29sdW1uLnByb3BlcnR5KVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIGNvbnN0IG9wdGlvbiA9IHtcclxuICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgIHRyaWdnZXI6ICdpdGVtJyxcclxuICAgICAgICBmb3JtYXR0ZXI6ICd7YX0gPGJyLz57Yn0gOiB7Y30gKHtkfSUpJ1xyXG4gICAgICB9LFxyXG4gICAgICBsZWdlbmQ6IHtcclxuICAgICAgICB0eXBlOiAnc2Nyb2xsJyxcclxuICAgICAgICBvcmllbnQ6ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgcmlnaHQ6IDEwLFxyXG4gICAgICAgIHRvcDogMjAsXHJcbiAgICAgICAgYm90dG9tOiAyMCxcclxuICAgICAgICBkYXRhOiBsZWdlbmREYXRhXHJcbiAgICAgICAgLy8gc2VsZWN0ZWQ6IGRhdGEuc2VsZWN0ZWRcclxuICAgICAgfSxcclxuICAgICAgc2VyaWVzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogc2VyaWVDb2x1bW4udGl0bGUsXHJcbiAgICAgICAgICB0eXBlOiAncGllJyxcclxuICAgICAgICAgIHJhZGl1czogJzUwJScsXHJcbiAgICAgICAgICBjZW50ZXI6IFsnNDAlJywgJzUwJSddLFxyXG4gICAgICAgICAgZGF0YTogc2VyaWVzRGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvblxyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrUHJpdmlsZWdlIChpdGVtOiBNZW51Rmlyc3RPcHRpb24gfCBNZW51Q2hpbGRPcHRpb24sIHBhcmFtczogSW50ZXJjZXB0b3JNZW51UGFyYW1zKSB7XHJcbiAgY29uc3QgJHRhYmxlOiBhbnkgPSBwYXJhbXMuJHRhYmxlXHJcbiAgY29uc3QgeyBjb2RlLCBwYXJhbXM6IGNoYXJ0UGFyYW1zID0ge30gfSA9IGl0ZW1cclxuICBzd2l0Y2ggKGNvZGUpIHtcclxuICAgIGNhc2UgJ0NIQVJUX0JBUl9YX0FYSVMnOlxyXG4gICAgY2FzZSAnQ0hBUlRfQkFSX1lfQVhJUyc6XHJcbiAgICBjYXNlICdDSEFSVF9MSU5FJzoge1xyXG4gICAgICBjb25zdCB7IHJvd3MsIGNvbHVtbnMgfTogeyByb3dzOiBhbnlbXSwgY29sdW1uczogQ29sdW1uQ29uZmlnW10gfSA9ICR0YWJsZS5nZXRTZWxlY3RlZFJhbmdlcygpXHJcbiAgICAgIGNvbnN0IHsgY2F0ZWdvcnkgfSA9IGNoYXJ0UGFyYW1zXHJcbiAgICAgIGlmIChjYXRlZ29yeSkge1xyXG4gICAgICAgIGNvbnN0IHNlcmllQ29sdW1ucyA9IGNvbHVtbnMuZmlsdGVyKChjb2x1bW4pID0+IGNvbHVtbi5wcm9wZXJ0eSAhPT0gY2F0ZWdvcnkpXHJcbiAgICAgICAgaXRlbS5kaXNhYmxlZCA9ICFyb3dzLmxlbmd0aCB8fCBzZXJpZUNvbHVtbnMubGVuZ3RoIDwgMVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGl0ZW0uZGlzYWJsZWQgPSAhcm93cy5sZW5ndGggfHwgY29sdW1ucy5sZW5ndGggPCAyXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ0NIQVJUX1BJRSc6IHtcclxuICAgICAgY29uc3QgeyByb3dzLCBjb2x1bW5zIH06IHsgcm93czogYW55W10sIGNvbHVtbnM6IENvbHVtbkNvbmZpZ1tdIH0gPSAkdGFibGUuZ2V0U2VsZWN0ZWRSYW5nZXMoKVxyXG4gICAgICBjb25zdCB7IGNhdGVnb3J5IH0gPSBjaGFydFBhcmFtc1xyXG4gICAgICBpZiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICBjb25zdCBzZXJpZUNvbHVtbnMgPSBjb2x1bW5zLmZpbHRlcigoY29sdW1uKSA9PiBjb2x1bW4ucHJvcGVydHkgIT09IGNhdGVnb3J5KVxyXG4gICAgICAgIGl0ZW0uZGlzYWJsZWQgPSAhcm93cy5sZW5ndGggfHwgc2VyaWVDb2x1bW5zLmxlbmd0aCAhPT0gMVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGl0ZW0uZGlzYWJsZWQgPSAhcm93cy5sZW5ndGggfHwgY29sdW1ucy5sZW5ndGggIT09IDJcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgICBicmVha1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQmVmb3JlRGVzdHJveUV2ZW50IChwYXJhbXM6IEludGVyY2VwdG9yUGFyYW1zKSB7XHJcbiAgY29uc3QgJHRhYmxlOiBhbnkgPSBwYXJhbXMuJHRhYmxlXHJcbiAgY29uc3QgeyBjaGFydE1vZGFscyB9OiB7IGNoYXJ0TW9kYWxzOiBzdHJpbmdbXSB9ID0gJHRhYmxlXHJcbiAgaWYgKGNoYXJ0TW9kYWxzKSB7XHJcbiAgICBjaGFydE1vZGFscy5zbGljZSgwKS5mb3JFYWNoKChpZCkgPT4gX3Z4ZXRhYmxlLm1vZGFsLmNsb3NlKGlkKSlcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByaXZpbGVnZUV2ZW50IChwYXJhbXM6IEludGVyY2VwdG9yTWVudVBhcmFtcykge1xyXG4gIHBhcmFtcy5vcHRpb25zLmZvckVhY2goKGxpc3QpID0+IHtcclxuICAgIGxpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBjaGVja1ByaXZpbGVnZShpdGVtLCBwYXJhbXMpXHJcbiAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgY2hlY2tQcml2aWxlZ2UoY2hpbGQsIHBhcmFtcylcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOWbvuihqOa4suafk+aPkuS7tlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZYRVRhYmxlUGx1Z2luQ2hhcnRzID0ge1xyXG4gIGluc3RhbGwgICh4dGFibGU6IHR5cGVvZiBWWEVUYWJsZSkge1xyXG4gICAgY29uc3QgeyB2LCBpbnRlcmNlcHRvciwgbWVudXMgfSA9IHh0YWJsZVxyXG4gICAgaWYgKHYgIT09ICd2MicpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdbdnhlLXRhYmxlLXBsdWdpbi1jaGFydHNdIFYyIHZlcnNpb24gaXMgcmVxdWlyZWQuJylcclxuICAgIH1cclxuICAgIF92eGV0YWJsZSA9IHh0YWJsZVxyXG4gICAgaW50ZXJjZXB0b3IuYWRkKCdiZWZvcmVEZXN0cm95JywgaGFuZGxlQmVmb3JlRGVzdHJveUV2ZW50KVxyXG4gICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5zaG93TWVudScsIGhhbmRsZVByaXZpbGVnZUV2ZW50KVxyXG4gICAgbWVudXMubWl4aW4obWVudU1hcClcclxuICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUpIHtcclxuICB3aW5kb3cuVlhFVGFibGUudXNlKFZYRVRhYmxlUGx1Z2luQ2hhcnRzKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpbkNoYXJ0c1xyXG4iXX0=
